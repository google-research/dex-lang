<!DOCTYPE HTML>
<html><head><style type="text/css">/*Copyright2019GoogleLLC*//**//*UseofthissourcecodeisgovernedbyaBSD-style*//*licensethatcanbefoundintheLICENSEfileorat*//*https://developers.google.com/open-source/licenses/bsd*/body{margin:1emauto1emauto;padding:1em1em1em1em;max-width:50em;font-family:Helvetica,sans-serif;font-size:100%;color:#333;padding-bottom:500px;}.cell{}.code-block,.err-block,.result-block{padding:0em0em0em2em;display:block;font-family:monospace;white-space:pre;}code{background-color:#F0F0F0;}.result-block{border-left:3pxsolid#87CEFA;}.prose-block{line-height:140%;}.err-block{font-weight:bold;color:#B22222;border-left:3pxsolid#B22222;}.plot{padding:5em;}.plot-img{width:80%;}.comment{color:#808080;}.keyword{color:#0000DD;}.command{color:#A80000;}.symbol{color:#E07000;}.type-name{color:#A80000;}.iso-sugar{color:#25BBA7;}</style><meta charset="UTF-8"></head><body><div id="main-output"><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block">load dxbo &quot;scratch<span class="symbol">/</span>mnist<span class="symbol">.</span>dxbo&quot; as mnist
</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block"><span class="command">:t</span> mnist
</div><div class="err-block">Error: variable not in scope: mnist</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block"><span class="comment">-- TODO: these should come from the data set itself
</span></div></div><div class="cell"><div class="code-block">type <span class="type-name">Img</span> <span class="symbol">=</span> 28<span class="symbol">=&gt;</span>28<span class="symbol">=&gt;</span><span class="type-name">Float</span>
type <span class="type-name">NTrain</span> <span class="symbol">=</span> 60000
type <span class="type-name">NTest</span>  <span class="symbol">=</span> 10000

</div><div class="err-block">Parse error:7:10:
  |
7 | type Img = 28=&gt;28=&gt;Float
  |          ^^
unexpected &quot;= &quot;
expecting &quot;..&quot;, &quot;..&lt;&quot;, &quot;&lt;..&quot;, &quot;&lt;..&lt;&quot;, &quot;=&gt;&quot;, &#39;$&#39;, &#39;.&#39;, &#39;:&#39;, arrow, backquoted name, end of line, expression, or infix operator
</div></div><div class="cell"><div class="code-block">(xsTrain<span class="symbol">,</span> ysTrain<span class="symbol">,</span> xsTest<span class="symbol">,</span> ysTest) <span class="symbol">=</span> mnist
</div><div class="err-block">Error: variable not in scope: mnist

(xsTrain, ysTrain, xsTest, ysTest) = mnist
                                     ^^^^^
</div></div><div class="cell"><div class="code-block">
</div></div><div class="cell"><div class="code-block">findNearestNeighbor <span class="symbol">:</span> (a <span class="symbol">-&gt;</span> a <span class="symbol">-&gt;</span> <span class="type-name">Float</span>) <span class="symbol">-&gt;</span> n<span class="symbol">=&gt;</span>a <span class="symbol">-&gt;</span> a <span class="symbol">-&gt;</span> n
findNearestNeighbor metric xs x <span class="symbol">=</span>
  distances<span class="symbol">.</span>i <span class="symbol">=</span> metric xs<span class="symbol">.</span>i x
  argmin distances

</div><div class="err-block">Parse error:13:58:
   |
13 | findNearestNeighbor : (a -&gt; a -&gt; Float) -&gt; n=&gt;a -&gt; a -&gt; n
   |                                                          ^
unexpected newline
expecting &quot;..&quot;, &quot;..&lt;&quot;, &quot;&lt;..&quot;, &quot;&lt;..&lt;&quot;, &quot;=&gt;&quot;, &#39;$&#39;, &#39;&#39;&#39;, &#39;.&#39;, &#39;:&#39;, &#39;=&#39;, &#39;_&#39;, alphanumeric character, arrow, backquoted name, expression, or infix operator
</div></div><div class="cell"><div class="code-block">imgDistance <span class="symbol">:</span> <span class="type-name">Img</span> <span class="symbol">-&gt;</span> <span class="type-name">Img</span> <span class="symbol">-&gt;</span> <span class="type-name">Float</span>
imgDistance x y <span class="symbol">=</span> sum <span class="keyword">for</span> (i<span class="symbol">,</span>j)<span class="symbol">.</span> sq (x<span class="symbol">.</span>i<span class="symbol">.</span>j <span class="symbol">-</span> y<span class="symbol">.</span>i<span class="symbol">.</span>j)

</div><div class="err-block">Parse error:18:34:
   |
18 | imgDistance : Img -&gt; Img -&gt; Float
   |                                  ^
unexpected newline
expecting &quot;..&quot;, &quot;..&lt;&quot;, &quot;&lt;..&quot;, &quot;&lt;..&lt;&quot;, &quot;=&gt;&quot;, &#39;$&#39;, &#39;&#39;&#39;, &#39;.&#39;, &#39;:&#39;, &#39;=&#39;, &#39;_&#39;, alphanumeric character, arrow, backquoted name, expression, or infix operator
</div></div><div class="cell"><div class="code-block">fracTrue <span class="symbol">:</span> n<span class="symbol">=&gt;</span><span class="type-name">Bool</span> <span class="symbol">-&gt;</span> <span class="type-name">Float</span>
fracTrue xs <span class="symbol">=</span> mean <span class="keyword">for</span> i<span class="symbol">.</span> float (b2i xs<span class="symbol">.</span>i)

</div><div class="err-block">Parse error:21:28:
   |
21 | fracTrue : n=&gt;Bool -&gt; Float
   |                            ^
unexpected newline
expecting &quot;..&quot;, &quot;..&lt;&quot;, &quot;&lt;..&quot;, &quot;&lt;..&lt;&quot;, &quot;=&gt;&quot;, &#39;$&#39;, &#39;&#39;&#39;, &#39;.&#39;, &#39;:&#39;, &#39;=&#39;, &#39;_&#39;, alphanumeric character, arrow, backquoted name, expression, or infix operator
</div></div><div class="cell"><div class="code-block">example <span class="symbol">=</span> asidx <span class="symbol">@</span><span class="type-name">NTest</span> 123
</div><div class="err-block">Type error:
Expected: Int32
  Actual: (Int32 -&gt; a)
(Solving for: [a:Type])

example = asidx @NTest 123
          ^^^^^^
</div></div><div class="cell"><div class="code-block"><span class="command">:plotmat</span> xsTest<span class="symbol">.</span>example

</div><div class="err-block">Parse error:25:10:
   |
25 | :plotmat xsTest.example
   |          ^
unrecognized command: &quot;plotmat&quot;
</div></div><div class="cell"><div class="code-block"><span class="comment">-- look at closest match in the training set
</span></div></div><div class="cell"><div class="code-block">closest <span class="symbol">=</span> findNearestNeighbor imgDistance xsTrain (xsTest<span class="symbol">.</span>example)
</div><div class="err-block">Error: variable not in scope: findNearestNeighbor

closest = findNearestNeighbor imgDistance xsTrain (xsTest.example)
          ^^^^^^^^^^^^^^^^^^^^
</div></div><div class="cell"><div class="code-block"><span class="command">:plotmat</span> xsTrain<span class="symbol">.</span>closest

</div><div class="err-block">Parse error:29:10:
   |
29 | :plotmat xsTrain.closest
   |          ^
unrecognized command: &quot;plotmat&quot;
</div></div><div class="cell"><div class="code-block"><span class="comment">-- Make a subset of the test set (evaluating a single test example takes ~80ms)
</span></div></div><div class="cell"><div class="code-block">type <span class="type-name">NTestSmall</span> <span class="symbol">=</span> 1000
xsTest&#39; <span class="symbol">=</span> slice <span class="symbol">@</span><span class="type-name">NTestSmall</span> xsTest 0
ysTest&#39; <span class="symbol">=</span> slice <span class="symbol">@</span><span class="type-name">NTestSmall</span> ysTest 0

</div><div class="err-block">Parse error:32:17:
   |
32 | type NTestSmall = 1000
   |                 ^^
unexpected &quot;= &quot;
expecting &quot;..&quot;, &quot;..&lt;&quot;, &quot;&lt;..&quot;, &quot;&lt;..&lt;&quot;, &quot;=&gt;&quot;, &#39;$&#39;, &#39;.&#39;, &#39;:&#39;, arrow, backquoted name, end of line, expression, or infix operator
</div></div><div class="cell"><div class="code-block">closestTrainExample <span class="symbol">:</span> <span class="type-name">NTestSmall</span> <span class="symbol">=&gt;</span> <span class="type-name">NTrain</span>
closestTrainExample<span class="symbol">.</span>i <span class="symbol">=</span> findNearestNeighbor imgDistance xsTrain xsTest&#39;<span class="symbol">.</span>i

</div><div class="err-block">Parse error:36:43:
   |
36 | closestTrainExample : NTestSmall =&gt; NTrain
   |                                           ^
unexpected newline
expecting &quot;..&quot;, &quot;..&lt;&quot;, &quot;&lt;..&quot;, &quot;&lt;..&lt;&quot;, &quot;=&gt;&quot;, &#39;$&#39;, &#39;&#39;&#39;, &#39;.&#39;, &#39;:&#39;, &#39;=&#39;, &#39;_&#39;, alphanumeric character, arrow, expression, or infix operator
</div></div><div class="cell"><div class="code-block"><span class="command">:p</span> fracTrue <span class="keyword">for</span> i<span class="symbol">.</span> ysTrain<span class="symbol">.</span>(closestTrainExample<span class="symbol">.</span>i) <span class="symbol">==</span> ysTest&#39;<span class="symbol">.</span>i
</div><div class="err-block">Error: variable not in scope: fracTrue

:p fracTrue for i. ysTrain.(closestTrainExample.i) == ysTest&#39;.i
   ^^^^^^^^^
</div></div></div></body></html>