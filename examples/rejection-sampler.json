{"orderedNodesUpdate":{"numDropped":0,"newTail":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48]},"nodeMapUpdate":[[0,{"contents":[{"rsbBlockId":0,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\"></span></div>","rsbLexemeList":[],"rsbNumLines":0,"rsbLine":0,"rsbText":""},"Complete",[{"contents":[[0,0]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[0,0],"tnHighlights":[[0,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"}]],"tag":"Create"}],[1,{"contents":[{"rsbBlockId":1,"rsbHtml":"<div class=\"prose-block\"><h1>Rejection Sampler for a Binomial Distribution</h1>\n</div>","rsbLexemeList":[],"rsbNumLines":2,"rsbLine":1,"rsbText":"'# Rejection Sampler for a Binomial Distribution\n\n"},"Inert",[]],"tag":"Create"}],[2,{"contents":[{"rsbBlockId":2,"rsbHtml":"<div class=\"prose-block\"><p>We implement rejection sampling from a Binomial distribution using a uniform proposal.</p>\n</div>","rsbLexemeList":[],"rsbNumLines":2,"rsbLine":3,"rsbText":"'We implement rejection sampling from a Binomial distribution using a uniform proposal.\n\n"},"Inert",[]],"tag":"Create"}],[3,{"contents":[{"rsbBlockId":3,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_3_2\">def</span><span> </span><span id=\"span_3_3\">rejectionSample</span><span class=\"symbol\" id=\"span_3_5\">(</span><span id=\"span_3_6\">try</span><span class=\"symbol\" id=\"span_3_7\">:</span><span> </span><span class=\"symbol\" id=\"span_3_10\">(</span><span id=\"span_3_11\">Key</span><span class=\"symbol\" id=\"span_3_12\">)</span><span> </span><span class=\"symbol\" id=\"span_3_13\">-&gt;</span><span> </span><span id=\"span_3_15\">Maybe</span><span> </span><span id=\"span_3_17\">a</span><span class=\"symbol\" id=\"span_3_18\">,</span><span> </span><span id=\"span_3_19\">k</span><span class=\"symbol\" id=\"span_3_20\">:</span><span id=\"span_3_22\">Key</span><span class=\"symbol\" id=\"span_3_23\">)</span><span> </span><span class=\"symbol\" id=\"span_3_24\">-&gt;</span><span> </span><span id=\"span_3_25\">a</span><span>  </span><span class=\"keyword\" id=\"span_3_26\">given</span><span> </span><span class=\"symbol\" id=\"span_3_28\">(</span><span id=\"span_3_29\">a</span><span class=\"symbol\" id=\"span_3_30\">|</span><span id=\"span_3_32\">Data</span><span class=\"symbol\" id=\"span_3_33\">)</span><span> </span><span class=\"symbol\" id=\"span_3_34\">=</span><span class=\"comment\">\n  </span><span id=\"span_3_37\">iter</span><span> </span><span class=\"symbol\" id=\"span_3_40\">\\</span><span id=\"span_3_41\">i</span><span class=\"symbol\" id=\"span_3_42\">.</span><span> </span><span class=\"keyword\" id=\"span_3_44\">case</span><span> </span><span id=\"span_3_45\">try</span><span> </span><span class=\"symbol\" id=\"span_3_46\">$</span><span> </span><span id=\"span_3_48\">hash</span><span> </span><span id=\"span_3_50\">k</span><span> </span><span id=\"span_3_52\">i</span><span> </span><span class=\"keyword\" id=\"span_3_53\">of</span><span class=\"comment\">\n    </span><span id=\"span_3_54\">Nothing</span><span> </span><span class=\"symbol\" id=\"span_3_55\">-&gt;</span><span> </span><span id=\"span_3_56\">Continue</span><span class=\"comment\">\n    </span><span id=\"span_3_57\">Just</span><span> </span><span id=\"span_3_59\">x</span><span>  </span><span class=\"symbol\" id=\"span_3_60\">-&gt;</span><span> </span><span id=\"span_3_61\">Done</span><span> </span><span id=\"span_3_63\">x</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[2,3,5,6,7,10,11,12,13,15,17,18,19,20,22,23,24,25,26,28,29,30,32,33,34,37,40,41,42,44,45,46,48,50,52,53,54,55,56,57,59,60,61,63],"rsbNumLines":4,"rsbLine":5,"rsbText":"def rejectionSample(try: (Key) -> Maybe a, k:Key) -> a  given (a|Data) =\n  iter \\i. case try $ hash k i of\n    Nothing -> Continue\n    Just x  -> Done x\n"},"Complete",[{"contents":[[2,1],[3,3],[5,4],[6,6],[7,8],[10,9],[11,11],[12,9],[13,14],[15,15],[17,17],[18,4],[19,19],[20,21],[22,22],[23,4],[24,1],[25,25],[26,1],[28,27],[29,29],[30,31],[32,32],[33,27],[34,1],[37,37],[40,39],[41,41],[42,39],[44,43],[45,45],[46,47],[48,48],[50,50],[52,52],[53,43],[54,54],[55,43],[56,56],[57,57],[59,59],[60,43],[61,61],[63,63]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[2,63],"tnHighlights":[[1,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[1,{"contents":{"tnSpan":[2,63],"tnHighlights":[[2,"HighlightLeaf"],[24,"HighlightLeaf"],[26,"HighlightLeaf"],[34,"HighlightLeaf"],[3,"HighlightGroup"],[4,"HighlightGroup"],[25,"HighlightGroup"],[27,"HighlightGroup"],[35,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[2,{"contents":{"tnSpan":[2,2],"tnHighlights":[[2,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[3,{"contents":{"tnSpan":[3,3],"tnHighlights":[[3,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[4,{"contents":{"tnSpan":[5,23],"tnHighlights":[[5,"HighlightLeaf"],[18,"HighlightLeaf"],[23,"HighlightLeaf"],[8,"HighlightGroup"],[21,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[5,{"contents":{"tnSpan":[5,5],"tnHighlights":[[5,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[6,{"contents":{"tnSpan":[6,6],"tnHighlights":[[6,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[7,{"contents":{"tnSpan":[7,7],"tnHighlights":[[7,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[8,{"contents":{"tnSpan":[6,17],"tnHighlights":[[7,"HighlightLeaf"],[6,"HighlightGroup"],[14,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[9,{"contents":{"tnSpan":[10,12],"tnHighlights":[[10,"HighlightLeaf"],[12,"HighlightLeaf"],[11,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[10,{"contents":{"tnSpan":[10,10],"tnHighlights":[[10,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[11,{"contents":{"tnSpan":[11,11],"tnHighlights":[[11,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[12,{"contents":{"tnSpan":[12,12],"tnHighlights":[[12,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[13,{"contents":{"tnSpan":[13,13],"tnHighlights":[[13,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[14,{"contents":{"tnSpan":[10,17],"tnHighlights":[[13,"HighlightLeaf"],[9,"HighlightGroup"],[16,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[15,{"contents":{"tnSpan":[15,15],"tnHighlights":[[15,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[16,{"contents":{"tnSpan":[15,17],"tnHighlights":[[15,"HighlightGroup"],[17,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[17,{"contents":{"tnSpan":[17,17],"tnHighlights":[[17,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[18,{"contents":{"tnSpan":[18,18],"tnHighlights":[[18,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[19,{"contents":{"tnSpan":[19,19],"tnHighlights":[[19,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[20,{"contents":{"tnSpan":[20,20],"tnHighlights":[[20,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[21,{"contents":{"tnSpan":[19,22],"tnHighlights":[[20,"HighlightLeaf"],[19,"HighlightGroup"],[22,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[22,{"contents":{"tnSpan":[22,22],"tnHighlights":[[22,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[23,{"contents":{"tnSpan":[23,23],"tnHighlights":[[23,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[24,{"contents":{"tnSpan":[24,24],"tnHighlights":[[24,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[25,{"contents":{"tnSpan":[25,25],"tnHighlights":[[25,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[26,{"contents":{"tnSpan":[26,26],"tnHighlights":[[26,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[27,{"contents":{"tnSpan":[28,33],"tnHighlights":[[28,"HighlightLeaf"],[33,"HighlightLeaf"],[31,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[28,{"contents":{"tnSpan":[28,28],"tnHighlights":[[28,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[29,{"contents":{"tnSpan":[29,29],"tnHighlights":[[29,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[30,{"contents":{"tnSpan":[30,30],"tnHighlights":[[30,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[31,{"contents":{"tnSpan":[29,32],"tnHighlights":[[30,"HighlightLeaf"],[29,"HighlightGroup"],[32,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[32,{"contents":{"tnSpan":[32,32],"tnHighlights":[[32,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[33,{"contents":{"tnSpan":[33,33],"tnHighlights":[[33,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[34,{"contents":{"tnSpan":[34,34],"tnHighlights":[[34,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[35,{"contents":{"tnSpan":[37,63],"tnHighlights":[[36,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[36,{"contents":{"tnSpan":[37,63],"tnHighlights":[[38,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[37,{"contents":{"tnSpan":[37,37],"tnHighlights":[[37,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[38,{"contents":{"tnSpan":[37,63],"tnHighlights":[[37,"HighlightGroup"],[39,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[39,{"contents":{"tnSpan":[40,63],"tnHighlights":[[40,"HighlightLeaf"],[42,"HighlightLeaf"],[41,"HighlightGroup"],[43,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[40,{"contents":{"tnSpan":[40,40],"tnHighlights":[[40,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[41,{"contents":{"tnSpan":[41,41],"tnHighlights":[[41,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[42,{"contents":{"tnSpan":[42,42],"tnHighlights":[[42,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[43,{"contents":{"tnSpan":[44,63],"tnHighlights":[[44,"HighlightLeaf"],[53,"HighlightLeaf"],[55,"HighlightLeaf"],[60,"HighlightLeaf"],[47,"HighlightGroup"],[54,"HighlightGroup"],[56,"HighlightGroup"],[58,"HighlightGroup"],[62,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[44,{"contents":{"tnSpan":[44,44],"tnHighlights":[[44,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[45,{"contents":{"tnSpan":[45,45],"tnHighlights":[[45,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[46,{"contents":{"tnSpan":[46,46],"tnHighlights":[[46,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[47,{"contents":{"tnSpan":[45,52],"tnHighlights":[[46,"HighlightLeaf"],[45,"HighlightGroup"],[51,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[48,{"contents":{"tnSpan":[48,48],"tnHighlights":[[48,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[49,{"contents":{"tnSpan":[48,50],"tnHighlights":[[48,"HighlightGroup"],[50,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[50,{"contents":{"tnSpan":[50,50],"tnHighlights":[[50,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[51,{"contents":{"tnSpan":[48,52],"tnHighlights":[[49,"HighlightGroup"],[52,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[52,{"contents":{"tnSpan":[52,52],"tnHighlights":[[52,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[53,{"contents":{"tnSpan":[53,53],"tnHighlights":[[53,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[54,{"contents":{"tnSpan":[54,54],"tnHighlights":[[54,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[55,{"contents":{"tnSpan":[55,55],"tnHighlights":[[55,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[56,{"contents":{"tnSpan":[56,56],"tnHighlights":[[56,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[57,{"contents":{"tnSpan":[57,57],"tnHighlights":[[57,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[58,{"contents":{"tnSpan":[57,59],"tnHighlights":[[57,"HighlightGroup"],[59,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[59,{"contents":{"tnSpan":[59,59],"tnHighlights":[[59,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[60,{"contents":{"tnSpan":[60,60],"tnHighlights":[[60,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[61,{"contents":{"tnSpan":[61,61],"tnHighlights":[[61,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[62,{"contents":{"tnSpan":[61,63],"tnHighlights":[[61,"HighlightGroup"],[63,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[63,{"contents":{"tnSpan":[63,63],"tnHighlights":[[63,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[3,{"contents":{"tnuHighlights":[[3,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[6,{"contents":{"tnuHighlights":[[6,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[11,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[15,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[17,{"contents":{"tnuHighlights":[[29,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[[17,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[19,{"contents":{"tnuHighlights":[[19,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[22,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[25,{"contents":{"tnuHighlights":[[29,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[[25,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[[29,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[[29,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[32,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Data(a:Type)\n  do_not_implement_this_interface_for_the_compiler_relies_on_the_invariant_it_protects : (a) -> a\n"]},"tag":"Update"}],[37,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef iter(body: (Nat) -> {|eff} IterResult a) -> {|eff} a given (a|Data, eff:Effects) =\n  result = yield_state (Nothing::Maybe a) \\resultRef.\n    i <- with_state (0::Nat)\n    while \\.\n      continue = is_nothing $ get resultRef\n      if continue then\n        case body(get(i)) of\n          Continue -> i := get i + 1\n          Done(result) -> resultRef := Just result\n      continue\n  case result of\n    Just(ans) -> ans\n    Nothing -> unreachable()\n"]},"tag":"Update"}],[41,{"contents":{"tnuHighlights":[[41,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[45,{"contents":{"tnuHighlights":[[6,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[6,{"contents":{"tnuHighlights":[[45,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[48,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef hash(x:Key, y:Nat) -> Key =\n  y64 = n_to_w64 y\n  threefry_2x32(x, y64)\n"]},"tag":"Update"}],[50,{"contents":{"tnuHighlights":[[19,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[19,{"contents":{"tnuHighlights":[[50,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[52,{"contents":{"tnuHighlights":[[41,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[41,{"contents":{"tnuHighlights":[[52,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[54,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[56,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum IterResult(a|Data) =\n  Continue\n  Done(a)\n"]},"tag":"Update"}],[57,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[59,{"contents":{"tnuHighlights":[[59,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[61,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum IterResult(a|Data) =\n  Continue\n  Done(a)\n"]},"tag":"Update"}],[63,{"contents":{"tnuHighlights":[[59,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[59,{"contents":{"tnuHighlights":[[63,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[1,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Data a)](try:((v#1:Word64) -> (Maybe a)),k:Word64) -> a)"]},"tag":"Update"}],[6,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((v#1:Word64) -> (Maybe a))"]},"tag":"Update"}],[11,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[14,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[15,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((a:Type) -> Type)"]},"tag":"Update"}],[16,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[17,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[19,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[22,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[25,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[32,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[37,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Data a)]{eff:EffKind}(body:((v#1:Nat) -> {|eff} (IterResult\n                                                                  a))) -> {|eff} a)"]},"tag":"Update"}],[38,{"contents":{"tnuHighlights":[],"tnuText":["Type:   a"]},"tag":"Update"}],[41,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[43,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (IterResult a)"]},"tag":"Update"}],[45,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((v#1:Word64) -> (Maybe a))"]},"tag":"Update"}],[47,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Maybe a)"]},"tag":"Update"}],[48,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((x:Word64,y:Nat) -> Word64)"]},"tag":"Update"}],[50,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[51,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[52,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[56,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (IterResult a)"]},"tag":"Update"}],[59,{"contents":{"tnuHighlights":[],"tnuText":["Type:   a"]},"tag":"Update"}],[61,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a.1:Type}[v#4:(Data a.1)](v#5:a.1) -> (IterResult a.1))"]},"tag":"Update"}],[62,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (IterResult a)"]},"tag":"Update"}],[63,{"contents":{"tnuHighlights":[],"tnuText":["Type:   a"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[4,{"contents":[{"rsbBlockId":4,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":9,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[5,{"contents":[{"rsbBlockId":5,"rsbHtml":"<div class=\"code-block\"><span id=\"span_5_65\">Prob</span><span>    </span><span class=\"symbol\" id=\"span_5_66\">=</span><span> </span><span id=\"span_5_67\">Float</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[65,66,67],"rsbNumLines":1,"rsbLine":10,"rsbText":"Prob    = Float\n"},"Complete",[{"contents":[[65,65],[66,64],[67,67]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[65,67],"tnHighlights":[[64,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[64,{"contents":{"tnSpan":[65,67],"tnHighlights":[[66,"HighlightLeaf"],[65,"HighlightGroup"],[67,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[65,{"contents":{"tnSpan":[65,65],"tnHighlights":[[65,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[66,{"contents":{"tnSpan":[66,66],"tnHighlights":[[66,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[67,{"contents":{"tnSpan":[67,67],"tnHighlights":[[67,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[65,{"contents":{"tnuHighlights":[[65,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[67,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[67,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[6,{"contents":[{"rsbBlockId":6,"rsbHtml":"<div class=\"code-block\"><span id=\"span_6_69\">LogProb</span><span> </span><span class=\"symbol\" id=\"span_6_70\">=</span><span> </span><span id=\"span_6_71\">Float</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[69,70,71],"rsbNumLines":1,"rsbLine":11,"rsbText":"LogProb = Float\n"},"Complete",[{"contents":[[69,69],[70,68],[71,71]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[69,71],"tnHighlights":[[68,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[68,{"contents":{"tnSpan":[69,71],"tnHighlights":[[70,"HighlightLeaf"],[69,"HighlightGroup"],[71,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[69,{"contents":{"tnSpan":[69,69],"tnHighlights":[[69,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[70,{"contents":{"tnSpan":[70,70],"tnHighlights":[[70,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[71,{"contents":{"tnSpan":[71,71],"tnHighlights":[[71,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[69,{"contents":{"tnuHighlights":[[69,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[71,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[71,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[7,{"contents":[{"rsbBlockId":7,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":12,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[8,{"contents":[{"rsbBlockId":8,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\"># log probability density of a Binomial distribution\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":13,"rsbText":"# log probability density of a Binomial distribution\n"},"Inert",[]],"tag":"Create"}],[9,{"contents":[{"rsbBlockId":9,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_9_73\">def</span><span> </span><span id=\"span_9_74\">logBinomialProb</span><span class=\"symbol\" id=\"span_9_76\">(</span><span id=\"span_9_77\">n&#39;</span><span class=\"symbol\" id=\"span_9_78\">:</span><span id=\"span_9_80\">Nat</span><span class=\"symbol\" id=\"span_9_81\">,</span><span> </span><span id=\"span_9_82\">p</span><span class=\"symbol\" id=\"span_9_83\">:</span><span id=\"span_9_85\">Prob</span><span class=\"symbol\" id=\"span_9_86\">,</span><span> </span><span id=\"span_9_87\">counts&#39;</span><span class=\"symbol\" id=\"span_9_88\">:</span><span id=\"span_9_90\">Nat</span><span class=\"symbol\" id=\"span_9_91\">)</span><span> </span><span class=\"symbol\" id=\"span_9_92\">-&gt;</span><span> </span><span id=\"span_9_93\">LogProb</span><span> </span><span class=\"symbol\" id=\"span_9_94\">=</span><span class=\"comment\">\n  </span><span id=\"span_9_97\">n</span><span>      </span><span class=\"symbol\" id=\"span_9_98\">=</span><span> </span><span id=\"span_9_99\">n_to_f</span><span> </span><span id=\"span_9_101\">n&#39;</span><span class=\"comment\">\n  </span><span id=\"span_9_103\">counts</span><span> </span><span class=\"symbol\" id=\"span_9_104\">=</span><span> </span><span id=\"span_9_105\">n_to_f</span><span> </span><span id=\"span_9_107\">counts&#39;</span><span class=\"comment\">\n  </span><span id=\"span_9_109\">pSuccess</span><span> </span><span class=\"symbol\" id=\"span_9_110\">=</span><span> </span><span id=\"span_9_111\">log</span><span> </span><span id=\"span_9_113\">p</span><span> </span><span class=\"symbol\" id=\"span_9_114\">*</span><span> </span><span id=\"span_9_116\">counts</span><span class=\"comment\">\n  </span><span id=\"span_9_118\">pFailure</span><span> </span><span class=\"symbol\" id=\"span_9_119\">=</span><span> </span><span id=\"span_9_120\">log1p</span><span> </span><span class=\"symbol\" id=\"span_9_123\">(</span><span class=\"symbol\" id=\"span_9_124\">-</span><span id=\"span_9_126\">p</span><span class=\"symbol\" id=\"span_9_127\">)</span><span> </span><span class=\"symbol\" id=\"span_9_128\">*</span><span> </span><span class=\"symbol\" id=\"span_9_131\">(</span><span id=\"span_9_132\">n</span><span> </span><span class=\"symbol\" id=\"span_9_133\">-</span><span> </span><span id=\"span_9_135\">counts</span><span class=\"symbol\" id=\"span_9_136\">)</span><span class=\"comment\">\n  </span><span id=\"span_9_138\">normConst</span><span> </span><span class=\"symbol\" id=\"span_9_139\">=</span><span> </span><span class=\"symbol\" id=\"span_9_141\">(</span><span id=\"span_9_142\">lbeta</span><span> </span><span class=\"symbol\" id=\"span_9_145\">(</span><span class=\"literal\" id=\"span_9_146\">1.</span><span> </span><span class=\"symbol\" id=\"span_9_147\">+</span><span> </span><span id=\"span_9_149\">counts</span><span class=\"symbol\" id=\"span_9_150\">)</span><span> </span><span class=\"symbol\" id=\"span_9_153\">(</span><span class=\"literal\" id=\"span_9_154\">1.</span><span> </span><span class=\"symbol\" id=\"span_9_155\">+</span><span> </span><span id=\"span_9_157\">n</span><span> </span><span class=\"symbol\" id=\"span_9_158\">-</span><span> </span><span id=\"span_9_160\">counts</span><span class=\"symbol\" id=\"span_9_161\">)</span><span> </span><span class=\"symbol\" id=\"span_9_162\">+</span><span class=\"comment\">\n               </span><span id=\"span_9_164\">log1p</span><span> </span><span class=\"symbol\" id=\"span_9_167\">(</span><span id=\"span_9_168\">n</span><span class=\"symbol\" id=\"span_9_169\">)</span><span class=\"symbol\" id=\"span_9_170\">)</span><span class=\"comment\">\n  </span><span id=\"span_9_172\">pSuccess</span><span> </span><span class=\"symbol\" id=\"span_9_173\">+</span><span> </span><span id=\"span_9_175\">pFailure</span><span> </span><span class=\"symbol\" id=\"span_9_176\">-</span><span> </span><span id=\"span_9_178\">normConst</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[73,74,76,77,78,80,81,82,83,85,86,87,88,90,91,92,93,94,97,98,99,101,103,104,105,107,109,110,111,113,114,116,118,119,120,123,124,126,127,128,131,132,133,135,136,138,139,141,142,145,146,147,149,150,153,154,155,157,158,160,161,162,164,167,168,169,170,172,173,175,176,178],"rsbNumLines":8,"rsbLine":14,"rsbText":"def logBinomialProb(n':Nat, p:Prob, counts':Nat) -> LogProb =\n  n      = n_to_f n'\n  counts = n_to_f counts'\n  pSuccess = log p * counts\n  pFailure = log1p (-p) * (n - counts)\n  normConst = (lbeta (1. + counts) (1. + n - counts) +\n               log1p (n))\n  pSuccess + pFailure - normConst\n"},"Complete",[{"contents":[[73,72],[74,74],[76,75],[77,77],[78,79],[80,80],[81,75],[82,82],[83,84],[85,85],[86,75],[87,87],[88,89],[90,90],[91,75],[92,72],[93,93],[94,72],[97,97],[98,96],[99,99],[101,101],[103,103],[104,102],[105,105],[107,107],[109,109],[110,108],[111,111],[113,113],[114,114],[116,116],[118,118],[119,117],[120,120],[123,122],[124,124],[126,126],[127,122],[128,128],[131,130],[132,132],[133,133],[135,135],[136,130],[138,138],[139,137],[141,140],[142,142],[145,144],[146,146],[147,147],[149,149],[150,144],[153,152],[154,154],[155,155],[157,157],[158,158],[160,160],[161,152],[162,162],[164,164],[167,166],[168,168],[169,166],[170,140],[172,172],[173,173],[175,175],[176,176],[178,178]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[73,178],"tnHighlights":[[72,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[72,{"contents":{"tnSpan":[73,178],"tnHighlights":[[73,"HighlightLeaf"],[92,"HighlightLeaf"],[94,"HighlightLeaf"],[74,"HighlightGroup"],[75,"HighlightGroup"],[93,"HighlightGroup"],[95,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[73,{"contents":{"tnSpan":[73,73],"tnHighlights":[[73,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[74,{"contents":{"tnSpan":[74,74],"tnHighlights":[[74,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[75,{"contents":{"tnSpan":[76,91],"tnHighlights":[[76,"HighlightLeaf"],[81,"HighlightLeaf"],[86,"HighlightLeaf"],[91,"HighlightLeaf"],[79,"HighlightGroup"],[84,"HighlightGroup"],[89,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[76,{"contents":{"tnSpan":[76,76],"tnHighlights":[[76,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[77,{"contents":{"tnSpan":[77,77],"tnHighlights":[[77,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[78,{"contents":{"tnSpan":[78,78],"tnHighlights":[[78,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[79,{"contents":{"tnSpan":[77,80],"tnHighlights":[[78,"HighlightLeaf"],[77,"HighlightGroup"],[80,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[80,{"contents":{"tnSpan":[80,80],"tnHighlights":[[80,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[81,{"contents":{"tnSpan":[81,81],"tnHighlights":[[81,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[82,{"contents":{"tnSpan":[82,82],"tnHighlights":[[82,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[83,{"contents":{"tnSpan":[83,83],"tnHighlights":[[83,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[84,{"contents":{"tnSpan":[82,85],"tnHighlights":[[83,"HighlightLeaf"],[82,"HighlightGroup"],[85,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[85,{"contents":{"tnSpan":[85,85],"tnHighlights":[[85,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[86,{"contents":{"tnSpan":[86,86],"tnHighlights":[[86,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[87,{"contents":{"tnSpan":[87,87],"tnHighlights":[[87,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[88,{"contents":{"tnSpan":[88,88],"tnHighlights":[[88,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[89,{"contents":{"tnSpan":[87,90],"tnHighlights":[[88,"HighlightLeaf"],[87,"HighlightGroup"],[90,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[90,{"contents":{"tnSpan":[90,90],"tnHighlights":[[90,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[91,{"contents":{"tnSpan":[91,91],"tnHighlights":[[91,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[92,{"contents":{"tnSpan":[92,92],"tnHighlights":[[92,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[93,{"contents":{"tnSpan":[93,93],"tnHighlights":[[93,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[94,{"contents":{"tnSpan":[94,94],"tnHighlights":[[94,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[95,{"contents":{"tnSpan":[97,178],"tnHighlights":[[96,"HighlightGroup"],[102,"HighlightGroup"],[108,"HighlightGroup"],[117,"HighlightGroup"],[137,"HighlightGroup"],[171,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[96,{"contents":{"tnSpan":[97,101],"tnHighlights":[[98,"HighlightLeaf"],[97,"HighlightGroup"],[100,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[97,{"contents":{"tnSpan":[97,97],"tnHighlights":[[97,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[98,{"contents":{"tnSpan":[98,98],"tnHighlights":[[98,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[99,{"contents":{"tnSpan":[99,99],"tnHighlights":[[99,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[100,{"contents":{"tnSpan":[99,101],"tnHighlights":[[99,"HighlightGroup"],[101,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[101,{"contents":{"tnSpan":[101,101],"tnHighlights":[[101,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[102,{"contents":{"tnSpan":[103,107],"tnHighlights":[[104,"HighlightLeaf"],[103,"HighlightGroup"],[106,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[103,{"contents":{"tnSpan":[103,103],"tnHighlights":[[103,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[104,{"contents":{"tnSpan":[104,104],"tnHighlights":[[104,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[105,{"contents":{"tnSpan":[105,105],"tnHighlights":[[105,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[106,{"contents":{"tnSpan":[105,107],"tnHighlights":[[105,"HighlightGroup"],[107,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[107,{"contents":{"tnSpan":[107,107],"tnHighlights":[[107,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[108,{"contents":{"tnSpan":[109,116],"tnHighlights":[[110,"HighlightLeaf"],[109,"HighlightGroup"],[115,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[109,{"contents":{"tnSpan":[109,109],"tnHighlights":[[109,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[110,{"contents":{"tnSpan":[110,110],"tnHighlights":[[110,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[111,{"contents":{"tnSpan":[111,111],"tnHighlights":[[111,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[112,{"contents":{"tnSpan":[111,113],"tnHighlights":[[111,"HighlightGroup"],[113,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[113,{"contents":{"tnSpan":[113,113],"tnHighlights":[[113,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[114,{"contents":{"tnSpan":[114,114],"tnHighlights":[[114,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[115,{"contents":{"tnSpan":[111,116],"tnHighlights":[[112,"HighlightGroup"],[114,"HighlightGroup"],[116,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[116,{"contents":{"tnSpan":[116,116],"tnHighlights":[[116,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[117,{"contents":{"tnSpan":[118,136],"tnHighlights":[[119,"HighlightLeaf"],[118,"HighlightGroup"],[129,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[118,{"contents":{"tnSpan":[118,118],"tnHighlights":[[118,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[119,{"contents":{"tnSpan":[119,119],"tnHighlights":[[119,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[120,{"contents":{"tnSpan":[120,120],"tnHighlights":[[120,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[121,{"contents":{"tnSpan":[120,127],"tnHighlights":[[120,"HighlightGroup"],[122,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[122,{"contents":{"tnSpan":[123,127],"tnHighlights":[[123,"HighlightLeaf"],[127,"HighlightLeaf"],[125,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[123,{"contents":{"tnSpan":[123,123],"tnHighlights":[[123,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[124,{"contents":{"tnSpan":[124,124],"tnHighlights":[[124,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[125,{"contents":{"tnSpan":[124,126],"tnHighlights":[[124,"HighlightGroup"],[126,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[126,{"contents":{"tnSpan":[126,126],"tnHighlights":[[126,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[127,{"contents":{"tnSpan":[127,127],"tnHighlights":[[127,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[128,{"contents":{"tnSpan":[128,128],"tnHighlights":[[128,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[129,{"contents":{"tnSpan":[120,136],"tnHighlights":[[121,"HighlightGroup"],[128,"HighlightGroup"],[130,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[130,{"contents":{"tnSpan":[131,136],"tnHighlights":[[131,"HighlightLeaf"],[136,"HighlightLeaf"],[134,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[131,{"contents":{"tnSpan":[131,131],"tnHighlights":[[131,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[132,{"contents":{"tnSpan":[132,132],"tnHighlights":[[132,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[133,{"contents":{"tnSpan":[133,133],"tnHighlights":[[133,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[134,{"contents":{"tnSpan":[132,135],"tnHighlights":[[132,"HighlightGroup"],[133,"HighlightGroup"],[135,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[135,{"contents":{"tnSpan":[135,135],"tnHighlights":[[135,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[136,{"contents":{"tnSpan":[136,136],"tnHighlights":[[136,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[137,{"contents":{"tnSpan":[138,170],"tnHighlights":[[139,"HighlightLeaf"],[138,"HighlightGroup"],[140,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[138,{"contents":{"tnSpan":[138,138],"tnHighlights":[[138,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[139,{"contents":{"tnSpan":[139,139],"tnHighlights":[[139,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[140,{"contents":{"tnSpan":[141,170],"tnHighlights":[[141,"HighlightLeaf"],[170,"HighlightLeaf"],[163,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[141,{"contents":{"tnSpan":[141,141],"tnHighlights":[[141,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[142,{"contents":{"tnSpan":[142,142],"tnHighlights":[[142,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[143,{"contents":{"tnSpan":[142,150],"tnHighlights":[[142,"HighlightGroup"],[144,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[144,{"contents":{"tnSpan":[145,150],"tnHighlights":[[145,"HighlightLeaf"],[150,"HighlightLeaf"],[148,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[145,{"contents":{"tnSpan":[145,145],"tnHighlights":[[145,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[146,{"contents":{"tnSpan":[146,146],"tnHighlights":[[146,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[147,{"contents":{"tnSpan":[147,147],"tnHighlights":[[147,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[148,{"contents":{"tnSpan":[146,149],"tnHighlights":[[146,"HighlightGroup"],[147,"HighlightGroup"],[149,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[149,{"contents":{"tnSpan":[149,149],"tnHighlights":[[149,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[150,{"contents":{"tnSpan":[150,150],"tnHighlights":[[150,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[151,{"contents":{"tnSpan":[142,161],"tnHighlights":[[143,"HighlightGroup"],[152,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[152,{"contents":{"tnSpan":[153,161],"tnHighlights":[[153,"HighlightLeaf"],[161,"HighlightLeaf"],[159,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[153,{"contents":{"tnSpan":[153,153],"tnHighlights":[[153,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[154,{"contents":{"tnSpan":[154,154],"tnHighlights":[[154,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[155,{"contents":{"tnSpan":[155,155],"tnHighlights":[[155,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[156,{"contents":{"tnSpan":[154,157],"tnHighlights":[[154,"HighlightGroup"],[155,"HighlightGroup"],[157,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[157,{"contents":{"tnSpan":[157,157],"tnHighlights":[[157,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[158,{"contents":{"tnSpan":[158,158],"tnHighlights":[[158,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[159,{"contents":{"tnSpan":[154,160],"tnHighlights":[[156,"HighlightGroup"],[158,"HighlightGroup"],[160,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[160,{"contents":{"tnSpan":[160,160],"tnHighlights":[[160,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[161,{"contents":{"tnSpan":[161,161],"tnHighlights":[[161,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[162,{"contents":{"tnSpan":[162,162],"tnHighlights":[[162,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[163,{"contents":{"tnSpan":[142,169],"tnHighlights":[[151,"HighlightGroup"],[162,"HighlightGroup"],[165,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[164,{"contents":{"tnSpan":[164,164],"tnHighlights":[[164,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[165,{"contents":{"tnSpan":[164,169],"tnHighlights":[[164,"HighlightGroup"],[166,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[166,{"contents":{"tnSpan":[167,169],"tnHighlights":[[167,"HighlightLeaf"],[169,"HighlightLeaf"],[168,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[167,{"contents":{"tnSpan":[167,167],"tnHighlights":[[167,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[168,{"contents":{"tnSpan":[168,168],"tnHighlights":[[168,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[169,{"contents":{"tnSpan":[169,169],"tnHighlights":[[169,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[170,{"contents":{"tnSpan":[170,170],"tnHighlights":[[170,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[171,{"contents":{"tnSpan":[172,178],"tnHighlights":[[177,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[172,{"contents":{"tnSpan":[172,172],"tnHighlights":[[172,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[173,{"contents":{"tnSpan":[173,173],"tnHighlights":[[173,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[174,{"contents":{"tnSpan":[172,175],"tnHighlights":[[172,"HighlightGroup"],[173,"HighlightGroup"],[175,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[175,{"contents":{"tnSpan":[175,175],"tnHighlights":[[175,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[176,{"contents":{"tnSpan":[176,176],"tnHighlights":[[176,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[177,{"contents":{"tnSpan":[172,178],"tnHighlights":[[174,"HighlightGroup"],[176,"HighlightGroup"],[178,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[178,{"contents":{"tnSpan":[178,178],"tnHighlights":[[178,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[74,{"contents":{"tnuHighlights":[[74,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[77,{"contents":{"tnuHighlights":[[77,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[80,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[82,{"contents":{"tnuHighlights":[[82,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[85,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nProb    = Float\n"]},"tag":"Update"}],[87,{"contents":{"tnuHighlights":[[87,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[90,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[93,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nLogProb = Float\n"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[[97,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[99,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef n_to_f(x: Nat) -> Float   = nat_to_rep x | internal_cast\n"]},"tag":"Update"}],[101,{"contents":{"tnuHighlights":[[77,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[77,{"contents":{"tnuHighlights":[[101,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[105,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef n_to_f(x: Nat) -> Float   = nat_to_rep x | internal_cast\n"]},"tag":"Update"}],[107,{"contents":{"tnuHighlights":[[87,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[87,{"contents":{"tnuHighlights":[[107,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[109,{"contents":{"tnuHighlights":[[109,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[111,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[113,{"contents":{"tnuHighlights":[[82,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[82,{"contents":{"tnuHighlights":[[113,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[114,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Mul(a|Data)\n  (*) : (a, a) -> a\n  one : a\n"]},"tag":"Update"}],[116,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[116,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[118,{"contents":{"tnuHighlights":[[118,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[120,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[124,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef neg( v:a)          -> a given (a|VSpace) = (-1.0) .* v\n"]},"tag":"Update"}],[126,{"contents":{"tnuHighlights":[[82,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[82,{"contents":{"tnuHighlights":[[126,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[128,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Mul(a|Data)\n  (*) : (a, a) -> a\n  one : a\n"]},"tag":"Update"}],[132,{"contents":{"tnuHighlights":[[97,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[[132,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[133,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Sub(a|Add)\n  (-) : (a, a) -> a\n"]},"tag":"Update"}],[135,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[135,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[138,{"contents":{"tnuHighlights":[[138,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[142,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef lbeta(x:a, y:a) -> a given (a|Sub|Floating) = lgamma x + lgamma y - lgamma (x + y)\n"]},"tag":"Update"}],[147,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[149,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[149,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[155,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[157,{"contents":{"tnuHighlights":[[97,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[[157,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[158,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Sub(a|Add)\n  (-) : (a, a) -> a\n"]},"tag":"Update"}],[160,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[160,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[162,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[164,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[168,{"contents":{"tnuHighlights":[[97,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[[168,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[172,{"contents":{"tnuHighlights":[[109,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[109,{"contents":{"tnuHighlights":[[172,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[173,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[175,{"contents":{"tnuHighlights":[[118,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[118,{"contents":{"tnuHighlights":[[175,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[176,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Sub(a|Add)\n  (-) : (a, a) -> a\n"]},"tag":"Update"}],[178,{"contents":{"tnuHighlights":[[138,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[138,{"contents":{"tnuHighlights":[[178,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[72,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n_:Nat,p:Float32,counts_:Nat) -> Float32)"]},"tag":"Update"}],[77,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[80,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[82,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[85,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[87,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[90,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[93,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[99,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((x:Nat) -> Float32)"]},"tag":"Update"}],[100,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[101,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[105,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((x:Nat) -> Float32)"]},"tag":"Update"}],[106,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[107,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[109,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[111,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#2:(Floating a)](v#0:a) -> a)"]},"tag":"Update"}],[112,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[113,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[114,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#2:(Mul a)](v#3:a,v#4:a) -> a)"]},"tag":"Update"}],[115,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[116,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[118,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[120,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#4:(Floating a)](v#0:a) -> a)"]},"tag":"Update"}],[121,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[122,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[124,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(VSpace a)](v:a) -> a)"]},"tag":"Update"}],[126,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[128,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#4:(Mul a)](v#5:a,v#6:a) -> a)"]},"tag":"Update"}],[129,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[130,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[132,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[133,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#6:(Sub a)](v#7:a,v#8:a) -> a)"]},"tag":"Update"}],[135,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[138,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[140,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[142,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Sub a),v#1:(Floating a)](x:a,y:a) -> a)"]},"tag":"Update"}],[144,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[146,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[147,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#8:(Add a)](v#9:a,v#10:a) -> a)"]},"tag":"Update"}],[149,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[151,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[152,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[154,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[155,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#9:(Add a)](v#10:a,v#11:a) -> a)"]},"tag":"Update"}],[156,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[157,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[158,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#9:(Sub a)](v#10:a,v#11:a) -> a)"]},"tag":"Update"}],[160,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[162,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#8:(Add a)](v#9:a,v#10:a) -> a)"]},"tag":"Update"}],[164,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#12:(Floating a)](v#0:a) -> a)"]},"tag":"Update"}],[165,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[166,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[172,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[173,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#14:(Add a)](v#15:a,v#16:a) -> a)"]},"tag":"Update"}],[174,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[175,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[176,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#14:(Sub a)](v#15:a,v#16:a) -> a)"]},"tag":"Update"}],[177,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[178,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[10,{"contents":[{"rsbBlockId":10,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":22,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[11,{"contents":[{"rsbBlockId":11,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_11_180\">def</span><span> </span><span id=\"span_11_181\">trySampleBinomial</span><span class=\"symbol\" id=\"span_11_183\">(</span><span id=\"span_11_184\">n</span><span class=\"symbol\" id=\"span_11_185\">:</span><span id=\"span_11_187\">Nat</span><span class=\"symbol\" id=\"span_11_188\">,</span><span> </span><span id=\"span_11_189\">p</span><span class=\"symbol\" id=\"span_11_190\">:</span><span id=\"span_11_192\">Prob</span><span class=\"symbol\" id=\"span_11_193\">,</span><span> </span><span id=\"span_11_194\">k</span><span class=\"symbol\" id=\"span_11_195\">:</span><span id=\"span_11_197\">Key</span><span class=\"symbol\" id=\"span_11_198\">)</span><span> </span><span class=\"symbol\" id=\"span_11_199\">-&gt;</span><span> </span><span id=\"span_11_200\">Maybe</span><span> </span><span id=\"span_11_202\">Nat</span><span> </span><span class=\"symbol\" id=\"span_11_203\">=</span><span class=\"comment\">\n  </span><span class=\"symbol\" id=\"span_11_207\">[</span><span id=\"span_11_208\">k1</span><span class=\"symbol\" id=\"span_11_209\">,</span><span> </span><span id=\"span_11_210\">k2</span><span class=\"symbol\" id=\"span_11_211\">]</span><span> </span><span class=\"symbol\" id=\"span_11_212\">=</span><span> </span><span id=\"span_11_213\">split_key</span><span> </span><span id=\"span_11_215\">k</span><span class=\"comment\">\n  </span><span id=\"span_11_217\">proposal</span><span> </span><span class=\"symbol\" id=\"span_11_218\">=</span><span> </span><span id=\"span_11_219\">f_to_n</span><span> </span><span class=\"symbol\" id=\"span_11_220\">$</span><span> </span><span id=\"span_11_222\">floor</span><span> </span><span class=\"symbol\" id=\"span_11_223\">$</span><span> </span><span id=\"span_11_225\">rand</span><span> </span><span id=\"span_11_227\">k1</span><span> </span><span class=\"symbol\" id=\"span_11_228\">*</span><span> </span><span id=\"span_11_230\">n_to_f</span><span> </span><span class=\"symbol\" id=\"span_11_233\">(</span><span id=\"span_11_234\">n</span><span> </span><span class=\"symbol\" id=\"span_11_235\">+</span><span> </span><span class=\"literal\" id=\"span_11_237\">1</span><span class=\"symbol\" id=\"span_11_238\">)</span><span class=\"comment\">\n  </span><span class=\"keyword\" id=\"span_11_241\">if</span><span> </span><span id=\"span_11_242\">proposal</span><span> </span><span class=\"symbol\" id=\"span_11_243\">&gt;</span><span> </span><span id=\"span_11_245\">n</span><span class=\"comment\">\n    </span><span class=\"keyword\" id=\"span_11_246\">then</span><span> </span><span id=\"span_11_247\">Nothing</span><span class=\"comment\">\n    </span><span class=\"keyword\" id=\"span_11_248\">else</span><span class=\"comment\">\n      </span><span id=\"span_11_251\">acceptance</span><span> </span><span class=\"symbol\" id=\"span_11_252\">=</span><span> </span><span id=\"span_11_253\">log</span><span> </span><span class=\"symbol\" id=\"span_11_256\">(</span><span id=\"span_11_257\">rand</span><span> </span><span id=\"span_11_259\">k2</span><span class=\"symbol\" id=\"span_11_260\">)</span><span> </span><span class=\"symbol\" id=\"span_11_261\">&lt;</span><span> </span><span id=\"span_11_263\">logBinomialProb</span><span> </span><span id=\"span_11_265\">n</span><span> </span><span id=\"span_11_267\">p</span><span> </span><span id=\"span_11_269\">proposal</span><span class=\"comment\">\n      </span><span class=\"keyword\" id=\"span_11_272\">if</span><span> </span><span id=\"span_11_273\">acceptance</span><span class=\"comment\">\n        </span><span class=\"keyword\" id=\"span_11_274\">then</span><span> </span><span id=\"span_11_275\">Just</span><span> </span><span id=\"span_11_277\">proposal</span><span class=\"comment\">\n        </span><span class=\"keyword\" id=\"span_11_278\">else</span><span> </span><span id=\"span_11_279\">Nothing</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[180,181,183,184,185,187,188,189,190,192,193,194,195,197,198,199,200,202,203,207,208,209,210,211,212,213,215,217,218,219,220,222,223,225,227,228,230,233,234,235,237,238,241,242,243,245,246,247,248,251,252,253,256,257,259,260,261,263,265,267,269,272,273,274,275,277,278,279],"rsbNumLines":10,"rsbLine":23,"rsbText":"def trySampleBinomial(n:Nat, p:Prob, k:Key) -> Maybe Nat =\n  [k1, k2] = split_key k\n  proposal = f_to_n $ floor $ rand k1 * n_to_f (n + 1)\n  if proposal > n\n    then Nothing\n    else\n      acceptance = log (rand k2) < logBinomialProb n p proposal\n      if acceptance\n        then Just proposal\n        else Nothing\n"},"CompleteWithErrors",[{"contents":[[180,179],[181,181],[183,182],[184,184],[185,186],[187,187],[188,182],[189,189],[190,191],[192,192],[193,182],[194,194],[195,196],[197,197],[198,182],[199,179],[200,200],[202,202],[203,179],[207,206],[208,208],[209,206],[210,210],[211,206],[212,205],[213,213],[215,215],[217,217],[218,216],[219,219],[220,221],[222,222],[223,224],[225,225],[227,227],[228,228],[230,230],[233,232],[234,234],[235,235],[237,237],[238,232],[241,240],[242,242],[243,243],[245,245],[246,240],[247,247],[248,240],[251,251],[252,250],[253,253],[256,255],[257,257],[259,259],[260,255],[261,261],[263,263],[265,265],[267,267],[269,269],[272,271],[273,273],[274,271],[275,275],[277,277],[278,271],[279,279]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[180,279],"tnHighlights":[[179,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[179,{"contents":{"tnSpan":[180,279],"tnHighlights":[[180,"HighlightLeaf"],[199,"HighlightLeaf"],[203,"HighlightLeaf"],[181,"HighlightGroup"],[182,"HighlightGroup"],[201,"HighlightGroup"],[204,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[180,{"contents":{"tnSpan":[180,180],"tnHighlights":[[180,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[181,{"contents":{"tnSpan":[181,181],"tnHighlights":[[181,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[182,{"contents":{"tnSpan":[183,198],"tnHighlights":[[183,"HighlightLeaf"],[188,"HighlightLeaf"],[193,"HighlightLeaf"],[198,"HighlightLeaf"],[186,"HighlightGroup"],[191,"HighlightGroup"],[196,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[183,{"contents":{"tnSpan":[183,183],"tnHighlights":[[183,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[184,{"contents":{"tnSpan":[184,184],"tnHighlights":[[184,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[185,{"contents":{"tnSpan":[185,185],"tnHighlights":[[185,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[186,{"contents":{"tnSpan":[184,187],"tnHighlights":[[185,"HighlightLeaf"],[184,"HighlightGroup"],[187,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[187,{"contents":{"tnSpan":[187,187],"tnHighlights":[[187,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[188,{"contents":{"tnSpan":[188,188],"tnHighlights":[[188,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[189,{"contents":{"tnSpan":[189,189],"tnHighlights":[[189,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[190,{"contents":{"tnSpan":[190,190],"tnHighlights":[[190,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[191,{"contents":{"tnSpan":[189,192],"tnHighlights":[[190,"HighlightLeaf"],[189,"HighlightGroup"],[192,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[192,{"contents":{"tnSpan":[192,192],"tnHighlights":[[192,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[193,{"contents":{"tnSpan":[193,193],"tnHighlights":[[193,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[194,{"contents":{"tnSpan":[194,194],"tnHighlights":[[194,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[195,{"contents":{"tnSpan":[195,195],"tnHighlights":[[195,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[196,{"contents":{"tnSpan":[194,197],"tnHighlights":[[195,"HighlightLeaf"],[194,"HighlightGroup"],[197,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[197,{"contents":{"tnSpan":[197,197],"tnHighlights":[[197,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[198,{"contents":{"tnSpan":[198,198],"tnHighlights":[[198,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[199,{"contents":{"tnSpan":[199,199],"tnHighlights":[[199,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[200,{"contents":{"tnSpan":[200,200],"tnHighlights":[[200,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[201,{"contents":{"tnSpan":[200,202],"tnHighlights":[[200,"HighlightGroup"],[202,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[202,{"contents":{"tnSpan":[202,202],"tnHighlights":[[202,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[203,{"contents":{"tnSpan":[203,203],"tnHighlights":[[203,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[204,{"contents":{"tnSpan":[207,279],"tnHighlights":[[205,"HighlightGroup"],[216,"HighlightGroup"],[239,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[205,{"contents":{"tnSpan":[207,215],"tnHighlights":[[212,"HighlightLeaf"],[206,"HighlightGroup"],[214,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[206,{"contents":{"tnSpan":[207,211],"tnHighlights":[[207,"HighlightLeaf"],[209,"HighlightLeaf"],[211,"HighlightLeaf"],[208,"HighlightGroup"],[210,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[207,{"contents":{"tnSpan":[207,207],"tnHighlights":[[207,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[208,{"contents":{"tnSpan":[208,208],"tnHighlights":[[208,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[209,{"contents":{"tnSpan":[209,209],"tnHighlights":[[209,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[210,{"contents":{"tnSpan":[210,210],"tnHighlights":[[210,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[211,{"contents":{"tnSpan":[211,211],"tnHighlights":[[211,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[212,{"contents":{"tnSpan":[212,212],"tnHighlights":[[212,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[213,{"contents":{"tnSpan":[213,213],"tnHighlights":[[213,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[214,{"contents":{"tnSpan":[213,215],"tnHighlights":[[213,"HighlightGroup"],[215,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[215,{"contents":{"tnSpan":[215,215],"tnHighlights":[[215,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[216,{"contents":{"tnSpan":[217,238],"tnHighlights":[[218,"HighlightLeaf"],[217,"HighlightGroup"],[221,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[217,{"contents":{"tnSpan":[217,217],"tnHighlights":[[217,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[218,{"contents":{"tnSpan":[218,218],"tnHighlights":[[218,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[219,{"contents":{"tnSpan":[219,219],"tnHighlights":[[219,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[220,{"contents":{"tnSpan":[220,220],"tnHighlights":[[220,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[221,{"contents":{"tnSpan":[219,238],"tnHighlights":[[220,"HighlightLeaf"],[219,"HighlightGroup"],[224,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[222,{"contents":{"tnSpan":[222,222],"tnHighlights":[[222,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[223,{"contents":{"tnSpan":[223,223],"tnHighlights":[[223,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[224,{"contents":{"tnSpan":[222,238],"tnHighlights":[[223,"HighlightLeaf"],[222,"HighlightGroup"],[229,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[225,{"contents":{"tnSpan":[225,225],"tnHighlights":[[225,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[226,{"contents":{"tnSpan":[225,227],"tnHighlights":[[225,"HighlightGroup"],[227,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[227,{"contents":{"tnSpan":[227,227],"tnHighlights":[[227,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[228,{"contents":{"tnSpan":[228,228],"tnHighlights":[[228,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[229,{"contents":{"tnSpan":[225,238],"tnHighlights":[[226,"HighlightGroup"],[228,"HighlightGroup"],[231,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[230,{"contents":{"tnSpan":[230,230],"tnHighlights":[[230,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[231,{"contents":{"tnSpan":[230,238],"tnHighlights":[[230,"HighlightGroup"],[232,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[232,{"contents":{"tnSpan":[233,238],"tnHighlights":[[233,"HighlightLeaf"],[238,"HighlightLeaf"],[236,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[233,{"contents":{"tnSpan":[233,233],"tnHighlights":[[233,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[234,{"contents":{"tnSpan":[234,234],"tnHighlights":[[234,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[235,{"contents":{"tnSpan":[235,235],"tnHighlights":[[235,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[236,{"contents":{"tnSpan":[234,237],"tnHighlights":[[234,"HighlightGroup"],[235,"HighlightGroup"],[237,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[237,{"contents":{"tnSpan":[237,237],"tnHighlights":[[237,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[238,{"contents":{"tnSpan":[238,238],"tnHighlights":[[238,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[239,{"contents":{"tnSpan":[241,279],"tnHighlights":[[240,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[240,{"contents":{"tnSpan":[241,279],"tnHighlights":[[241,"HighlightLeaf"],[246,"HighlightLeaf"],[248,"HighlightLeaf"],[244,"HighlightGroup"],[247,"HighlightGroup"],[249,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[241,{"contents":{"tnSpan":[241,241],"tnHighlights":[[241,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[242,{"contents":{"tnSpan":[242,242],"tnHighlights":[[242,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[243,{"contents":{"tnSpan":[243,243],"tnHighlights":[[243,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[244,{"contents":{"tnSpan":[242,245],"tnHighlights":[[242,"HighlightGroup"],[243,"HighlightGroup"],[245,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[245,{"contents":{"tnSpan":[245,245],"tnHighlights":[[245,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[246,{"contents":{"tnSpan":[246,246],"tnHighlights":[[246,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[247,{"contents":{"tnSpan":[247,247],"tnHighlights":[[247,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[248,{"contents":{"tnSpan":[248,248],"tnHighlights":[[248,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[249,{"contents":{"tnSpan":[251,279],"tnHighlights":[[250,"HighlightGroup"],[270,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[250,{"contents":{"tnSpan":[251,269],"tnHighlights":[[252,"HighlightLeaf"],[251,"HighlightGroup"],[262,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[251,{"contents":{"tnSpan":[251,251],"tnHighlights":[[251,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[252,{"contents":{"tnSpan":[252,252],"tnHighlights":[[252,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[253,{"contents":{"tnSpan":[253,253],"tnHighlights":[[253,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[254,{"contents":{"tnSpan":[253,260],"tnHighlights":[[253,"HighlightGroup"],[255,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[255,{"contents":{"tnSpan":[256,260],"tnHighlights":[[256,"HighlightLeaf"],[260,"HighlightLeaf"],[258,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[256,{"contents":{"tnSpan":[256,256],"tnHighlights":[[256,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[257,{"contents":{"tnSpan":[257,257],"tnHighlights":[[257,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[258,{"contents":{"tnSpan":[257,259],"tnHighlights":[[257,"HighlightGroup"],[259,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[259,{"contents":{"tnSpan":[259,259],"tnHighlights":[[259,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[260,{"contents":{"tnSpan":[260,260],"tnHighlights":[[260,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[261,{"contents":{"tnSpan":[261,261],"tnHighlights":[[261,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[262,{"contents":{"tnSpan":[253,269],"tnHighlights":[[254,"HighlightGroup"],[261,"HighlightGroup"],[268,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[263,{"contents":{"tnSpan":[263,263],"tnHighlights":[[263,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[264,{"contents":{"tnSpan":[263,265],"tnHighlights":[[263,"HighlightGroup"],[265,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[265,{"contents":{"tnSpan":[265,265],"tnHighlights":[[265,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[266,{"contents":{"tnSpan":[263,267],"tnHighlights":[[264,"HighlightGroup"],[267,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[267,{"contents":{"tnSpan":[267,267],"tnHighlights":[[267,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[268,{"contents":{"tnSpan":[263,269],"tnHighlights":[[266,"HighlightGroup"],[269,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[269,{"contents":{"tnSpan":[269,269],"tnHighlights":[[269,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[270,{"contents":{"tnSpan":[272,279],"tnHighlights":[[271,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[271,{"contents":{"tnSpan":[272,279],"tnHighlights":[[272,"HighlightLeaf"],[274,"HighlightLeaf"],[278,"HighlightLeaf"],[273,"HighlightGroup"],[276,"HighlightGroup"],[279,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[272,{"contents":{"tnSpan":[272,272],"tnHighlights":[[272,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[273,{"contents":{"tnSpan":[273,273],"tnHighlights":[[273,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[274,{"contents":{"tnSpan":[274,274],"tnHighlights":[[274,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[275,{"contents":{"tnSpan":[275,275],"tnHighlights":[[275,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[276,{"contents":{"tnSpan":[275,277],"tnHighlights":[[275,"HighlightGroup"],[277,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[277,{"contents":{"tnSpan":[277,277],"tnHighlights":[[277,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[278,{"contents":{"tnSpan":[278,278],"tnHighlights":[[278,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[279,{"contents":{"tnSpan":[279,279],"tnHighlights":[[279,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[181,{"contents":{"tnuHighlights":[[181,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[184,{"contents":{"tnuHighlights":[[184,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[187,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[189,{"contents":{"tnuHighlights":[[189,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[192,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nProb    = Float\n"]},"tag":"Update"}],[194,{"contents":{"tnuHighlights":[[194,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[197,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[200,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[202,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[208,{"contents":{"tnuHighlights":[[208,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[210,{"contents":{"tnuHighlights":[[210,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[213,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef split_key(k:Key) -> Fin n => Key given (n:Nat) = for i. ixkey(k, i)\n"]},"tag":"Update"}],[215,{"contents":{"tnuHighlights":[[194,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[194,{"contents":{"tnuHighlights":[[215,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[217,{"contents":{"tnuHighlights":[[217,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[219,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef f_to_n(x : Float)   -> Nat = internal_cast x | rep_to_nat\n"]},"tag":"Update"}],[222,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[225,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef rand(k:Key) -> Float =\n  exponent_bits : Word32 = 1065353216 # 1065353216 = 127 << 23\n  mantissa_bits = (high_word k .&. 8388607)  # 8388607 == (1 << 23) - 1\n  bits = exponent_bits .|. mantissa_bits\n  %bitcast(Float, bits) - 1.0\n"]},"tag":"Update"}],[227,{"contents":{"tnuHighlights":[[208,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[208,{"contents":{"tnuHighlights":[[227,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[228,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Mul(a|Data)\n  (*) : (a, a) -> a\n  one : a\n"]},"tag":"Update"}],[230,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef n_to_f(x: Nat) -> Float   = nat_to_rep x | internal_cast\n"]},"tag":"Update"}],[234,{"contents":{"tnuHighlights":[[184,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[184,{"contents":{"tnuHighlights":[[234,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[235,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[240,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Bool =\n  False\n  True\n"]},"tag":"Update"}],[242,{"contents":{"tnuHighlights":[[217,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[217,{"contents":{"tnuHighlights":[[242,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[243,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ord(a|Eq)\n  (>) : (a, a) -> Bool\n  (<) : (a, a) -> Bool\n"]},"tag":"Update"}],[245,{"contents":{"tnuHighlights":[[184,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[184,{"contents":{"tnuHighlights":[[245,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[247,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[251,{"contents":{"tnuHighlights":[[251,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[253,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[257,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef rand(k:Key) -> Float =\n  exponent_bits : Word32 = 1065353216 # 1065353216 = 127 << 23\n  mantissa_bits = (high_word k .&. 8388607)  # 8388607 == (1 << 23) - 1\n  bits = exponent_bits .|. mantissa_bits\n  %bitcast(Float, bits) - 1.0\n"]},"tag":"Update"}],[259,{"contents":{"tnuHighlights":[[210,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[210,{"contents":{"tnuHighlights":[[259,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[261,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ord(a|Eq)\n  (>) : (a, a) -> Bool\n  (<) : (a, a) -> Bool\n"]},"tag":"Update"}],[263,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef logBinomialProb(n':Nat, p:Prob, counts':Nat) -> LogProb =\n  n      = n_to_f n'\n  counts = n_to_f counts'\n  pSuccess = log p * counts\n  pFailure = log1p (-p) * (n - counts)\n  normConst = (lbeta (1. + counts) (1. + n - counts) +\n               log1p (n))\n  pSuccess + pFailure - normConst\n"]},"tag":"Update"}],[265,{"contents":{"tnuHighlights":[[184,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[184,{"contents":{"tnuHighlights":[[265,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[267,{"contents":{"tnuHighlights":[[189,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[189,{"contents":{"tnuHighlights":[[267,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[269,{"contents":{"tnuHighlights":[[217,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[217,{"contents":{"tnuHighlights":[[269,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[271,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Bool =\n  False\n  True\n"]},"tag":"Update"}],[273,{"contents":{"tnuHighlights":[[251,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[251,{"contents":{"tnuHighlights":[[273,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[275,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[277,{"contents":{"tnuHighlights":[[217,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[217,{"contents":{"tnuHighlights":[[277,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[279,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[184,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[187,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[189,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[192,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[194,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[197,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[200,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((a:Type) -> Type)"]},"tag":"Update"}],[201,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[202,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[213,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Nat}(k:Word64) -> ((Fin n) => Word64))"]},"tag":"Update"}],[215,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[214,"Type error: couldn't infer implicit argument `n` of split_key"],"tag":"RenderedError"}]],"tag":"Create"}],[12,{"contents":[{"rsbBlockId":12,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":33,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[13,{"contents":[{"rsbBlockId":13,"rsbHtml":"<div class=\"prose-block\"><h2>Example</h2>\n</div>","rsbLexemeList":[],"rsbNumLines":2,"rsbLine":34,"rsbText":"'## Example\n\n"},"Inert",[]],"tag":"Create"}],[14,{"contents":[{"rsbBlockId":14,"rsbHtml":"<div class=\"prose-block\"><p>We test the implementation by sampling from a Binomial distribution with 10 trials and success probability 0.4.</p>\n</div>","rsbLexemeList":[],"rsbNumLines":2,"rsbLine":36,"rsbText":"'We test the implementation by sampling from a Binomial distribution with 10 trials and success probability 0.4.\n\n"},"Inert",[]],"tag":"Create"}],[15,{"contents":[{"rsbBlockId":15,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\"># parameters\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":38,"rsbText":"# parameters\n"},"Inert",[]],"tag":"Create"}],[16,{"contents":[{"rsbBlockId":16,"rsbHtml":"<div class=\"code-block\"><span id=\"span_16_281\">n</span><span> </span><span class=\"symbol\" id=\"span_16_282\">=</span><span> </span><span class=\"literal\" id=\"span_16_283\">10</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[281,282,283],"rsbNumLines":1,"rsbLine":39,"rsbText":"n = 10\n"},"Complete",[{"contents":[[281,281],[282,280],[283,283]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[281,283],"tnHighlights":[[280,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[280,{"contents":{"tnSpan":[281,283],"tnHighlights":[[282,"HighlightLeaf"],[281,"HighlightGroup"],[283,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[281,{"contents":{"tnSpan":[281,281],"tnHighlights":[[281,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[282,{"contents":{"tnSpan":[282,282],"tnHighlights":[[282,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[283,{"contents":{"tnSpan":[283,283],"tnHighlights":[[283,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[281,{"contents":{"tnuHighlights":[[281,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[283,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[17,{"contents":[{"rsbBlockId":17,"rsbHtml":"<div class=\"code-block\"><span id=\"span_17_285\">p</span><span> </span><span class=\"symbol\" id=\"span_17_286\">=</span><span> </span><span class=\"literal\" id=\"span_17_287\">0.4</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[285,286,287],"rsbNumLines":1,"rsbLine":40,"rsbText":"p = 0.4\n"},"Complete",[{"contents":[[285,285],[286,284],[287,287]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[285,287],"tnHighlights":[[284,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[284,{"contents":{"tnSpan":[285,287],"tnHighlights":[[286,"HighlightLeaf"],[285,"HighlightGroup"],[287,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[285,{"contents":{"tnSpan":[285,285],"tnHighlights":[[285,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[286,{"contents":{"tnSpan":[286,286],"tnHighlights":[[286,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[287,{"contents":{"tnSpan":[287,287],"tnHighlights":[[287,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[285,{"contents":{"tnuHighlights":[[285,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[287,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[18,{"contents":[{"rsbBlockId":18,"rsbHtml":"<div class=\"code-block\"><span id=\"span_18_289\">numSamples</span><span> </span><span class=\"symbol\" id=\"span_18_290\">=</span><span> </span><span class=\"literal\" id=\"span_18_291\">5000</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[289,290,291],"rsbNumLines":1,"rsbLine":41,"rsbText":"numSamples = 5000\n"},"Complete",[{"contents":[[289,289],[290,288],[291,291]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[289,291],"tnHighlights":[[288,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[288,{"contents":{"tnSpan":[289,291],"tnHighlights":[[290,"HighlightLeaf"],[289,"HighlightGroup"],[291,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[289,{"contents":{"tnSpan":[289,289],"tnHighlights":[[289,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[290,{"contents":{"tnSpan":[290,290],"tnHighlights":[[290,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[291,{"contents":{"tnSpan":[291,291],"tnHighlights":[[291,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[289,{"contents":{"tnuHighlights":[[289,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[291,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[19,{"contents":[{"rsbBlockId":19,"rsbHtml":"<div class=\"code-block\"><span id=\"span_19_293\">k0</span><span> </span><span class=\"symbol\" id=\"span_19_294\">=</span><span> </span><span id=\"span_19_295\">new_key</span><span> </span><span class=\"literal\" id=\"span_19_297\">0</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[293,294,295,297],"rsbNumLines":1,"rsbLine":42,"rsbText":"k0 = new_key 0\n"},"Complete",[{"contents":[[293,293],[294,292],[295,295],[297,297]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[293,297],"tnHighlights":[[292,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[292,{"contents":{"tnSpan":[293,297],"tnHighlights":[[294,"HighlightLeaf"],[293,"HighlightGroup"],[296,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[293,{"contents":{"tnSpan":[293,293],"tnHighlights":[[293,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[294,{"contents":{"tnSpan":[294,294],"tnHighlights":[[294,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[295,{"contents":{"tnSpan":[295,295],"tnHighlights":[[295,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[296,{"contents":{"tnSpan":[295,297],"tnHighlights":[[295,"HighlightGroup"],[297,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[297,{"contents":{"tnSpan":[297,297],"tnHighlights":[[297,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[293,{"contents":{"tnuHighlights":[[293,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[295,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef new_key(x:Nat) -> Key = hash(0, x)\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[295,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((x:Nat) -> Word64)"]},"tag":"Update"}],[296,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[297,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[20,{"contents":[{"rsbBlockId":20,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":43,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[21,{"contents":[{"rsbBlockId":21,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\"># TODO: use currying sugar (or even better, effects)\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":44,"rsbText":"# TODO: use currying sugar (or even better, effects)\n"},"Inert",[]],"tag":"Create"}],[22,{"contents":[{"rsbBlockId":22,"rsbHtml":"<div class=\"code-block\"><span id=\"span_22_299\">rejectionSamples</span><span> </span><span class=\"symbol\" id=\"span_22_300\">=</span><span> </span><span id=\"span_22_301\">rand_vec</span><span> </span><span id=\"span_22_303\">numSamples</span><span> </span><span class=\"symbol\" id=\"span_22_306\">(</span><span class=\"symbol\" id=\"span_22_308\">\\</span><span id=\"span_22_309\">k</span><span class=\"symbol\" id=\"span_22_310\">.</span><span> </span><span id=\"span_22_311\">rejectionSample</span><span> </span><span class=\"symbol\" id=\"span_22_314\">(</span><span class=\"symbol\" id=\"span_22_316\">\\</span><span id=\"span_22_317\">k&#39;</span><span class=\"symbol\" id=\"span_22_318\">.</span><span> </span><span id=\"span_22_319\">trySampleBinomial</span><span> </span><span id=\"span_22_321\">n</span><span> </span><span id=\"span_22_323\">p</span><span> </span><span id=\"span_22_325\">k&#39;</span><span class=\"symbol\" id=\"span_22_326\">)</span><span> </span><span id=\"span_22_328\">k</span><span class=\"symbol\" id=\"span_22_329\">)</span><span> </span><span id=\"span_22_331\">k0</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[299,300,301,303,306,308,309,310,311,314,316,317,318,319,321,323,325,326,328,329,331],"rsbNumLines":1,"rsbLine":45,"rsbText":"rejectionSamples = rand_vec numSamples (\\k. rejectionSample (\\k'. trySampleBinomial n p k') k) k0\n"},"CompleteWithErrors",[{"contents":[[299,299],[300,298],[301,301],[303,303],[306,305],[308,307],[309,309],[310,307],[311,311],[314,313],[316,315],[317,317],[318,315],[319,319],[321,321],[323,323],[325,325],[326,313],[328,328],[329,305],[331,331]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[299,331],"tnHighlights":[[298,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[298,{"contents":{"tnSpan":[299,331],"tnHighlights":[[300,"HighlightLeaf"],[299,"HighlightGroup"],[330,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[299,{"contents":{"tnSpan":[299,299],"tnHighlights":[[299,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[300,{"contents":{"tnSpan":[300,300],"tnHighlights":[[300,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[301,{"contents":{"tnSpan":[301,301],"tnHighlights":[[301,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[302,{"contents":{"tnSpan":[301,303],"tnHighlights":[[301,"HighlightGroup"],[303,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[303,{"contents":{"tnSpan":[303,303],"tnHighlights":[[303,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[304,{"contents":{"tnSpan":[301,329],"tnHighlights":[[302,"HighlightGroup"],[305,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[305,{"contents":{"tnSpan":[306,329],"tnHighlights":[[306,"HighlightLeaf"],[329,"HighlightLeaf"],[307,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[306,{"contents":{"tnSpan":[306,306],"tnHighlights":[[306,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[307,{"contents":{"tnSpan":[308,328],"tnHighlights":[[308,"HighlightLeaf"],[310,"HighlightLeaf"],[309,"HighlightGroup"],[327,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[308,{"contents":{"tnSpan":[308,308],"tnHighlights":[[308,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[309,{"contents":{"tnSpan":[309,309],"tnHighlights":[[309,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[310,{"contents":{"tnSpan":[310,310],"tnHighlights":[[310,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[311,{"contents":{"tnSpan":[311,311],"tnHighlights":[[311,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[312,{"contents":{"tnSpan":[311,326],"tnHighlights":[[311,"HighlightGroup"],[313,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[313,{"contents":{"tnSpan":[314,326],"tnHighlights":[[314,"HighlightLeaf"],[326,"HighlightLeaf"],[315,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[314,{"contents":{"tnSpan":[314,314],"tnHighlights":[[314,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[315,{"contents":{"tnSpan":[316,325],"tnHighlights":[[316,"HighlightLeaf"],[318,"HighlightLeaf"],[317,"HighlightGroup"],[324,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[316,{"contents":{"tnSpan":[316,316],"tnHighlights":[[316,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[317,{"contents":{"tnSpan":[317,317],"tnHighlights":[[317,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[318,{"contents":{"tnSpan":[318,318],"tnHighlights":[[318,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[319,{"contents":{"tnSpan":[319,319],"tnHighlights":[[319,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[320,{"contents":{"tnSpan":[319,321],"tnHighlights":[[319,"HighlightGroup"],[321,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[321,{"contents":{"tnSpan":[321,321],"tnHighlights":[[321,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[322,{"contents":{"tnSpan":[319,323],"tnHighlights":[[320,"HighlightGroup"],[323,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[323,{"contents":{"tnSpan":[323,323],"tnHighlights":[[323,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[324,{"contents":{"tnSpan":[319,325],"tnHighlights":[[322,"HighlightGroup"],[325,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[325,{"contents":{"tnSpan":[325,325],"tnHighlights":[[325,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[326,{"contents":{"tnSpan":[326,326],"tnHighlights":[[326,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[327,{"contents":{"tnSpan":[311,328],"tnHighlights":[[312,"HighlightGroup"],[328,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[328,{"contents":{"tnSpan":[328,328],"tnHighlights":[[328,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[329,{"contents":{"tnSpan":[329,329],"tnHighlights":[[329,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[330,{"contents":{"tnSpan":[301,331],"tnHighlights":[[304,"HighlightGroup"],[331,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[331,{"contents":{"tnSpan":[331,331],"tnHighlights":[[331,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[301,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef rand_vec(n:Nat, f: (Key) -> a, k: Key) -> Fin n => a  given (a:Type) =\n  for i:(Fin n). f ixkey(k, i)\n"]},"tag":"Update"}],[303,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nnumSamples = 5000\n"]},"tag":"Update"}],[309,{"contents":{"tnuHighlights":[[309,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[311,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef rejectionSample(try: (Key) -> Maybe a, k:Key) -> a  given (a|Data) =\n  iter \\i. case try $ hash k i of\n    Nothing -> Continue\n    Just x  -> Done x\n"]},"tag":"Update"}],[317,{"contents":{"tnuHighlights":[[317,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[319,"Name error: error in (earlier) definition of variable: trySampleBinomial"],"tag":"RenderedError"}]],"tag":"Create"}],[23,{"contents":[{"rsbBlockId":23,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":46,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[24,{"contents":[{"rsbBlockId":24,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_24_332\">p</span><span> </span><span id=\"span_24_333\">slice</span><span> </span><span id=\"span_24_335\">rejectionSamples</span><span> </span><span class=\"literal\" id=\"span_24_337\">0</span><span> </span><span class=\"symbol\" id=\"span_24_338\">$</span><span> </span><span id=\"span_24_340\">Fin</span><span> </span><span class=\"literal\" id=\"span_24_342\">10</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[332,333,335,337,338,340,342],"rsbNumLines":1,"rsbLine":47,"rsbText":":p slice rejectionSamples 0 $ Fin 10\n"},"CompleteWithErrors",[{"contents":[[333,333],[335,335],[337,337],[338,339],[340,340],[342,342]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[333,342],"tnHighlights":[[339,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[333,{"contents":{"tnSpan":[333,333],"tnHighlights":[[333,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[334,{"contents":{"tnSpan":[333,335],"tnHighlights":[[333,"HighlightGroup"],[335,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[335,{"contents":{"tnSpan":[335,335],"tnHighlights":[[335,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[336,{"contents":{"tnSpan":[333,337],"tnHighlights":[[334,"HighlightGroup"],[337,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[337,{"contents":{"tnSpan":[337,337],"tnHighlights":[[337,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[338,{"contents":{"tnSpan":[338,338],"tnHighlights":[[338,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[339,{"contents":{"tnSpan":[333,342],"tnHighlights":[[338,"HighlightLeaf"],[336,"HighlightGroup"],[341,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[340,{"contents":{"tnSpan":[340,340],"tnHighlights":[[340,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[341,{"contents":{"tnSpan":[340,342],"tnHighlights":[[340,"HighlightGroup"],[342,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[342,{"contents":{"tnSpan":[342,342],"tnHighlights":[[342,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[333,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef slice(xs:n=>a, start:Nat, m|Ix) -> m=>a given (n|Ix, a:Type) =\n  for i. xs[from_ordinal (ordinal i + start)]\n"]},"tag":"Update"}],[339,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[335,"Name error: error in (earlier) definition of variable: rejectionSamples"],"tag":"RenderedError"}]],"tag":"Create"}],[25,{"contents":[{"rsbBlockId":25,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":49,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[26,{"contents":[{"rsbBlockId":26,"rsbHtml":"<div class=\"prose-block\"><p>The Binomial distribution has mean 4 and variance 2.4.</p>\n</div>","rsbLexemeList":[],"rsbNumLines":2,"rsbLine":50,"rsbText":"'The Binomial distribution has mean 4 and variance 2.4.\n\n"},"Inert",[]],"tag":"Create"}],[27,{"contents":[{"rsbBlockId":27,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_27_344\">def</span><span> </span><span id=\"span_27_345\">meanAndVariance</span><span class=\"symbol\" id=\"span_27_347\">(</span><span id=\"span_27_348\">xs</span><span class=\"symbol\" id=\"span_27_349\">:</span><span id=\"span_27_351\">n</span><span class=\"symbol\" id=\"span_27_352\">=&gt;</span><span id=\"span_27_354\">Float</span><span class=\"symbol\" id=\"span_27_355\">)</span><span> </span><span class=\"symbol\" id=\"span_27_356\">-&gt;</span><span> </span><span class=\"symbol\" id=\"span_27_358\">(</span><span id=\"span_27_359\">Float</span><span class=\"symbol\" id=\"span_27_360\">,</span><span> </span><span id=\"span_27_361\">Float</span><span class=\"symbol\" id=\"span_27_362\">)</span><span> </span><span class=\"keyword\" id=\"span_27_363\">given</span><span> </span><span class=\"symbol\" id=\"span_27_365\">(</span><span id=\"span_27_366\">n</span><span class=\"symbol\" id=\"span_27_367\">|</span><span id=\"span_27_369\">Ix</span><span class=\"symbol\" id=\"span_27_370\">)</span><span> </span><span class=\"symbol\" id=\"span_27_371\">=</span><span> </span><span class=\"symbol\" id=\"span_27_373\">(</span><span id=\"span_27_374\">mean</span><span> </span><span id=\"span_27_376\">xs</span><span class=\"symbol\" id=\"span_27_377\">,</span><span> </span><span id=\"span_27_378\">sq</span><span> </span><span class=\"symbol\" id=\"span_27_379\">$</span><span> </span><span id=\"span_27_381\">std</span><span> </span><span id=\"span_27_383\">xs</span><span class=\"symbol\" id=\"span_27_384\">)</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[344,345,347,348,349,351,352,354,355,356,358,359,360,361,362,363,365,366,367,369,370,371,373,374,376,377,378,379,381,383,384],"rsbNumLines":1,"rsbLine":52,"rsbText":"def meanAndVariance(xs:n=>Float) -> (Float, Float) given (n|Ix) = (mean xs, sq $ std xs)\n"},"Complete",[{"contents":[[344,343],[345,345],[347,346],[348,348],[349,350],[351,351],[352,353],[354,354],[355,346],[356,343],[358,357],[359,359],[360,357],[361,361],[362,357],[363,343],[365,364],[366,366],[367,368],[369,369],[370,364],[371,343],[373,372],[374,374],[376,376],[377,372],[378,378],[379,380],[381,381],[383,383],[384,372]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[344,384],"tnHighlights":[[343,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[343,{"contents":{"tnSpan":[344,384],"tnHighlights":[[344,"HighlightLeaf"],[356,"HighlightLeaf"],[363,"HighlightLeaf"],[371,"HighlightLeaf"],[345,"HighlightGroup"],[346,"HighlightGroup"],[357,"HighlightGroup"],[364,"HighlightGroup"],[372,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[344,{"contents":{"tnSpan":[344,344],"tnHighlights":[[344,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[345,{"contents":{"tnSpan":[345,345],"tnHighlights":[[345,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[346,{"contents":{"tnSpan":[347,355],"tnHighlights":[[347,"HighlightLeaf"],[355,"HighlightLeaf"],[350,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[347,{"contents":{"tnSpan":[347,347],"tnHighlights":[[347,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[348,{"contents":{"tnSpan":[348,348],"tnHighlights":[[348,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[349,{"contents":{"tnSpan":[349,349],"tnHighlights":[[349,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[350,{"contents":{"tnSpan":[348,354],"tnHighlights":[[349,"HighlightLeaf"],[348,"HighlightGroup"],[353,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[351,{"contents":{"tnSpan":[351,351],"tnHighlights":[[351,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[352,{"contents":{"tnSpan":[352,352],"tnHighlights":[[352,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[353,{"contents":{"tnSpan":[351,354],"tnHighlights":[[352,"HighlightLeaf"],[351,"HighlightGroup"],[354,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[354,{"contents":{"tnSpan":[354,354],"tnHighlights":[[354,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[355,{"contents":{"tnSpan":[355,355],"tnHighlights":[[355,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[356,{"contents":{"tnSpan":[356,356],"tnHighlights":[[356,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[357,{"contents":{"tnSpan":[358,362],"tnHighlights":[[358,"HighlightLeaf"],[360,"HighlightLeaf"],[362,"HighlightLeaf"],[359,"HighlightGroup"],[361,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[358,{"contents":{"tnSpan":[358,358],"tnHighlights":[[358,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[359,{"contents":{"tnSpan":[359,359],"tnHighlights":[[359,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[360,{"contents":{"tnSpan":[360,360],"tnHighlights":[[360,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[361,{"contents":{"tnSpan":[361,361],"tnHighlights":[[361,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[362,{"contents":{"tnSpan":[362,362],"tnHighlights":[[362,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[363,{"contents":{"tnSpan":[363,363],"tnHighlights":[[363,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[364,{"contents":{"tnSpan":[365,370],"tnHighlights":[[365,"HighlightLeaf"],[370,"HighlightLeaf"],[368,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[365,{"contents":{"tnSpan":[365,365],"tnHighlights":[[365,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[366,{"contents":{"tnSpan":[366,366],"tnHighlights":[[366,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[367,{"contents":{"tnSpan":[367,367],"tnHighlights":[[367,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[368,{"contents":{"tnSpan":[366,369],"tnHighlights":[[367,"HighlightLeaf"],[366,"HighlightGroup"],[369,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[369,{"contents":{"tnSpan":[369,369],"tnHighlights":[[369,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[370,{"contents":{"tnSpan":[370,370],"tnHighlights":[[370,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[371,{"contents":{"tnSpan":[371,371],"tnHighlights":[[371,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[372,{"contents":{"tnSpan":[373,384],"tnHighlights":[[373,"HighlightLeaf"],[377,"HighlightLeaf"],[384,"HighlightLeaf"],[375,"HighlightGroup"],[380,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[373,{"contents":{"tnSpan":[373,373],"tnHighlights":[[373,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[374,{"contents":{"tnSpan":[374,374],"tnHighlights":[[374,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[375,{"contents":{"tnSpan":[374,376],"tnHighlights":[[374,"HighlightGroup"],[376,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[376,{"contents":{"tnSpan":[376,376],"tnHighlights":[[376,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[377,{"contents":{"tnSpan":[377,377],"tnHighlights":[[377,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[378,{"contents":{"tnSpan":[378,378],"tnHighlights":[[378,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[379,{"contents":{"tnSpan":[379,379],"tnHighlights":[[379,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[380,{"contents":{"tnSpan":[378,383],"tnHighlights":[[379,"HighlightLeaf"],[378,"HighlightGroup"],[382,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[381,{"contents":{"tnSpan":[381,381],"tnHighlights":[[381,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[382,{"contents":{"tnSpan":[381,383],"tnHighlights":[[381,"HighlightGroup"],[383,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[383,{"contents":{"tnSpan":[383,383],"tnHighlights":[[383,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[384,{"contents":{"tnSpan":[384,384],"tnHighlights":[[384,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[345,{"contents":{"tnuHighlights":[[345,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[348,{"contents":{"tnuHighlights":[[348,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[351,{"contents":{"tnuHighlights":[[366,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[366,{"contents":{"tnuHighlights":[[351,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[354,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}],[359,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}],[361,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}],[366,{"contents":{"tnuHighlights":[[366,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[366,{"contents":{"tnuHighlights":[[366,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[369,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[374,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef mean(xs:n=>v) -> v given (n|Ix, v|VSpace) = sum xs / n_to_f (size n)\n"]},"tag":"Update"}],[376,{"contents":{"tnuHighlights":[[348,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[348,{"contents":{"tnuHighlights":[[376,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[378,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef sq(x:a) -> a given (a|Mul) = x * x\n"]},"tag":"Update"}],[381,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef std(xs:n=>v) -> v given (n|Ix, v|Mul|Sub|VSpace|Floating) = sqrt $ mean (each xs sq) - sq (mean xs)\n"]},"tag":"Update"}],[383,{"contents":{"tnuHighlights":[[348,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[348,{"contents":{"tnuHighlights":[[383,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[343,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n.1:Type}[v#0:(Ix n.1)](xs:(n.1 => Float32)) -> (Float32, Float32))"]},"tag":"Update"}],[348,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (n.1 => Float32)"]},"tag":"Update"}],[351,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[353,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[354,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[357,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[359,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[361,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[366,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[369,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[372,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Float32, Float32)"]},"tag":"Update"}],[374,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Type}[v#0:(Ix n)]{v:Type}[v#1:(VSpace v)](xs:(n => v)) -> v)"]},"tag":"Update"}],[375,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[376,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (n.1 => Float32)"]},"tag":"Update"}],[378,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Mul a)](x:a) -> a)"]},"tag":"Update"}],[380,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[381,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Type}[v#0:(Ix n)]{v:Type}[v#1:(Mul v),v#2:(Sub v),v#3:(VSpace v),v#4:(Floating v)](xs:(n\n                                                                                           => v)) -> v)"]},"tag":"Update"}],[382,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[383,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (n.1 => Float32)"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[28,{"contents":[{"rsbBlockId":28,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":53,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[29,{"contents":[{"rsbBlockId":29,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_29_385\">p</span><span> </span><span id=\"span_29_386\">meanAndVariance</span><span> </span><span class=\"symbol\" id=\"span_29_387\">$</span><span> </span><span id=\"span_29_389\">map</span><span> </span><span id=\"span_29_391\">n_to_f</span><span> </span><span id=\"span_29_393\">rejectionSamples</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[385,386,387,389,391,393],"rsbNumLines":1,"rsbLine":54,"rsbText":":p meanAndVariance $ map n_to_f rejectionSamples\n"},"CompleteWithErrors",[{"contents":[[386,386],[387,388],[389,389],[391,391],[393,393]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[386,393],"tnHighlights":[[388,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[386,{"contents":{"tnSpan":[386,386],"tnHighlights":[[386,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[387,{"contents":{"tnSpan":[387,387],"tnHighlights":[[387,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[388,{"contents":{"tnSpan":[386,393],"tnHighlights":[[387,"HighlightLeaf"],[386,"HighlightGroup"],[392,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[389,{"contents":{"tnSpan":[389,389],"tnHighlights":[[389,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[390,{"contents":{"tnSpan":[389,391],"tnHighlights":[[389,"HighlightGroup"],[391,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[391,{"contents":{"tnSpan":[391,391],"tnHighlights":[[391,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[392,{"contents":{"tnSpan":[389,393],"tnHighlights":[[390,"HighlightGroup"],[393,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[393,{"contents":{"tnSpan":[393,393],"tnHighlights":[[393,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[386,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef meanAndVariance(xs:n=>Float) -> (Float, Float) given (n|Ix) = (mean xs, sq $ std xs)\n"]},"tag":"Update"}],[388,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[389,"Name error: variable not in scope: map"],"tag":"RenderedError"}]],"tag":"Create"}],[30,{"contents":[{"rsbBlockId":30,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":56,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[31,{"contents":[{"rsbBlockId":31,"rsbHtml":"<div class=\"prose-block\"><h2>Alternative: Inversion sampling</h2>\n</div>","rsbLexemeList":[],"rsbNumLines":2,"rsbLine":57,"rsbText":"'## Alternative: Inversion sampling\n\n"},"Inert",[]],"tag":"Create"}],[32,{"contents":[{"rsbBlockId":32,"rsbHtml":"<div class=\"prose-block\"><p>Alternatively, we can use inversion sampling.</p>\n</div>","rsbLexemeList":[],"rsbNumLines":2,"rsbLine":59,"rsbText":"'Alternatively, we can use inversion sampling.\n\n"},"Inert",[]],"tag":"Create"}],[33,{"contents":[{"rsbBlockId":33,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_33_395\">def</span><span> </span><span id=\"span_33_396\">binomialSample</span><span class=\"symbol\" id=\"span_33_398\">(</span><span id=\"span_33_399\">n</span><span class=\"symbol\" id=\"span_33_400\">:</span><span id=\"span_33_402\">Nat</span><span class=\"symbol\" id=\"span_33_403\">,</span><span> </span><span id=\"span_33_404\">p</span><span class=\"symbol\" id=\"span_33_405\">:</span><span id=\"span_33_407\">Prob</span><span class=\"symbol\" id=\"span_33_408\">,</span><span> </span><span id=\"span_33_409\">k</span><span class=\"symbol\" id=\"span_33_410\">:</span><span id=\"span_33_412\">Key</span><span class=\"symbol\" id=\"span_33_413\">)</span><span> </span><span class=\"symbol\" id=\"span_33_414\">-&gt;</span><span> </span><span id=\"span_33_415\">Nat</span><span> </span><span class=\"symbol\" id=\"span_33_416\">=</span><span class=\"comment\">\n  </span><span id=\"span_33_419\">m</span><span> </span><span class=\"symbol\" id=\"span_33_420\">=</span><span> </span><span id=\"span_33_421\">n</span><span> </span><span class=\"symbol\" id=\"span_33_422\">+</span><span> </span><span class=\"literal\" id=\"span_33_424\">1</span><span class=\"comment\">\n  </span><span id=\"span_33_426\">logprobs</span><span> </span><span class=\"symbol\" id=\"span_33_427\">=</span><span> </span><span class=\"keyword\" id=\"span_33_429\">for</span><span> </span><span id=\"span_33_430\">i</span><span class=\"symbol\" id=\"span_33_431\">:</span><span class=\"symbol\" id=\"span_33_434\">(</span><span id=\"span_33_435\">Fin</span><span> </span><span id=\"span_33_437\">m</span><span class=\"symbol\" id=\"span_33_438\">)</span><span class=\"symbol\" id=\"span_33_439\">.</span><span> </span><span id=\"span_33_440\">logBinomialProb</span><span> </span><span id=\"span_33_442\">n</span><span> </span><span id=\"span_33_444\">p</span><span> </span><span class=\"symbol\" id=\"span_33_445\">$</span><span> </span><span id=\"span_33_447\">ordinal</span><span> </span><span id=\"span_33_449\">i</span><span class=\"comment\">\n  </span><span id=\"span_33_451\">ordinal</span><span> </span><span class=\"symbol\" id=\"span_33_452\">$</span><span> </span><span id=\"span_33_454\">categorical</span><span> </span><span id=\"span_33_456\">logprobs</span><span> </span><span id=\"span_33_458\">k</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[395,396,398,399,400,402,403,404,405,407,408,409,410,412,413,414,415,416,419,420,421,422,424,426,427,429,430,431,434,435,437,438,439,440,442,444,445,447,449,451,452,454,456,458],"rsbNumLines":4,"rsbLine":61,"rsbText":"def binomialSample(n:Nat, p:Prob, k:Key) -> Nat =\n  m = n + 1\n  logprobs = for i:(Fin m). logBinomialProb n p $ ordinal i\n  ordinal $ categorical logprobs k\n"},"Complete",[{"contents":[[395,394],[396,396],[398,397],[399,399],[400,401],[402,402],[403,397],[404,404],[405,406],[407,407],[408,397],[409,409],[410,411],[412,412],[413,397],[414,394],[415,415],[416,394],[419,419],[420,418],[421,421],[422,422],[424,424],[426,426],[427,425],[429,428],[430,430],[431,432],[434,433],[435,435],[437,437],[438,433],[439,428],[440,440],[442,442],[444,444],[445,446],[447,447],[449,449],[451,451],[452,453],[454,454],[456,456],[458,458]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[395,458],"tnHighlights":[[394,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[394,{"contents":{"tnSpan":[395,458],"tnHighlights":[[395,"HighlightLeaf"],[414,"HighlightLeaf"],[416,"HighlightLeaf"],[396,"HighlightGroup"],[397,"HighlightGroup"],[415,"HighlightGroup"],[417,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[395,{"contents":{"tnSpan":[395,395],"tnHighlights":[[395,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[396,{"contents":{"tnSpan":[396,396],"tnHighlights":[[396,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[397,{"contents":{"tnSpan":[398,413],"tnHighlights":[[398,"HighlightLeaf"],[403,"HighlightLeaf"],[408,"HighlightLeaf"],[413,"HighlightLeaf"],[401,"HighlightGroup"],[406,"HighlightGroup"],[411,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[398,{"contents":{"tnSpan":[398,398],"tnHighlights":[[398,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[399,{"contents":{"tnSpan":[399,399],"tnHighlights":[[399,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[400,{"contents":{"tnSpan":[400,400],"tnHighlights":[[400,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[401,{"contents":{"tnSpan":[399,402],"tnHighlights":[[400,"HighlightLeaf"],[399,"HighlightGroup"],[402,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[402,{"contents":{"tnSpan":[402,402],"tnHighlights":[[402,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[403,{"contents":{"tnSpan":[403,403],"tnHighlights":[[403,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[404,{"contents":{"tnSpan":[404,404],"tnHighlights":[[404,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[405,{"contents":{"tnSpan":[405,405],"tnHighlights":[[405,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[406,{"contents":{"tnSpan":[404,407],"tnHighlights":[[405,"HighlightLeaf"],[404,"HighlightGroup"],[407,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[407,{"contents":{"tnSpan":[407,407],"tnHighlights":[[407,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[408,{"contents":{"tnSpan":[408,408],"tnHighlights":[[408,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[409,{"contents":{"tnSpan":[409,409],"tnHighlights":[[409,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[410,{"contents":{"tnSpan":[410,410],"tnHighlights":[[410,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[411,{"contents":{"tnSpan":[409,412],"tnHighlights":[[410,"HighlightLeaf"],[409,"HighlightGroup"],[412,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[412,{"contents":{"tnSpan":[412,412],"tnHighlights":[[412,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[413,{"contents":{"tnSpan":[413,413],"tnHighlights":[[413,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[414,{"contents":{"tnSpan":[414,414],"tnHighlights":[[414,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[415,{"contents":{"tnSpan":[415,415],"tnHighlights":[[415,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[416,{"contents":{"tnSpan":[416,416],"tnHighlights":[[416,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[417,{"contents":{"tnSpan":[419,458],"tnHighlights":[[418,"HighlightGroup"],[425,"HighlightGroup"],[450,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[418,{"contents":{"tnSpan":[419,424],"tnHighlights":[[420,"HighlightLeaf"],[419,"HighlightGroup"],[423,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[419,{"contents":{"tnSpan":[419,419],"tnHighlights":[[419,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[420,{"contents":{"tnSpan":[420,420],"tnHighlights":[[420,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[421,{"contents":{"tnSpan":[421,421],"tnHighlights":[[421,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[422,{"contents":{"tnSpan":[422,422],"tnHighlights":[[422,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[423,{"contents":{"tnSpan":[421,424],"tnHighlights":[[421,"HighlightGroup"],[422,"HighlightGroup"],[424,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[424,{"contents":{"tnSpan":[424,424],"tnHighlights":[[424,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[425,{"contents":{"tnSpan":[426,449],"tnHighlights":[[427,"HighlightLeaf"],[426,"HighlightGroup"],[428,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[426,{"contents":{"tnSpan":[426,426],"tnHighlights":[[426,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[427,{"contents":{"tnSpan":[427,427],"tnHighlights":[[427,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[428,{"contents":{"tnSpan":[429,449],"tnHighlights":[[429,"HighlightLeaf"],[439,"HighlightLeaf"],[432,"HighlightGroup"],[446,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[429,{"contents":{"tnSpan":[429,429],"tnHighlights":[[429,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[430,{"contents":{"tnSpan":[430,430],"tnHighlights":[[430,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[431,{"contents":{"tnSpan":[431,431],"tnHighlights":[[431,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[432,{"contents":{"tnSpan":[430,438],"tnHighlights":[[431,"HighlightLeaf"],[430,"HighlightGroup"],[433,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[433,{"contents":{"tnSpan":[434,438],"tnHighlights":[[434,"HighlightLeaf"],[438,"HighlightLeaf"],[436,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[434,{"contents":{"tnSpan":[434,434],"tnHighlights":[[434,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[435,{"contents":{"tnSpan":[435,435],"tnHighlights":[[435,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[436,{"contents":{"tnSpan":[435,437],"tnHighlights":[[435,"HighlightGroup"],[437,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[437,{"contents":{"tnSpan":[437,437],"tnHighlights":[[437,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[438,{"contents":{"tnSpan":[438,438],"tnHighlights":[[438,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[439,{"contents":{"tnSpan":[439,439],"tnHighlights":[[439,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[440,{"contents":{"tnSpan":[440,440],"tnHighlights":[[440,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[441,{"contents":{"tnSpan":[440,442],"tnHighlights":[[440,"HighlightGroup"],[442,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[442,{"contents":{"tnSpan":[442,442],"tnHighlights":[[442,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[443,{"contents":{"tnSpan":[440,444],"tnHighlights":[[441,"HighlightGroup"],[444,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[444,{"contents":{"tnSpan":[444,444],"tnHighlights":[[444,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[445,{"contents":{"tnSpan":[445,445],"tnHighlights":[[445,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[446,{"contents":{"tnSpan":[440,449],"tnHighlights":[[445,"HighlightLeaf"],[443,"HighlightGroup"],[448,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[447,{"contents":{"tnSpan":[447,447],"tnHighlights":[[447,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[448,{"contents":{"tnSpan":[447,449],"tnHighlights":[[447,"HighlightGroup"],[449,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[449,{"contents":{"tnSpan":[449,449],"tnHighlights":[[449,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[450,{"contents":{"tnSpan":[451,458],"tnHighlights":[[453,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[451,{"contents":{"tnSpan":[451,451],"tnHighlights":[[451,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[452,{"contents":{"tnSpan":[452,452],"tnHighlights":[[452,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[453,{"contents":{"tnSpan":[451,458],"tnHighlights":[[452,"HighlightLeaf"],[451,"HighlightGroup"],[457,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[454,{"contents":{"tnSpan":[454,454],"tnHighlights":[[454,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[455,{"contents":{"tnSpan":[454,456],"tnHighlights":[[454,"HighlightGroup"],[456,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[456,{"contents":{"tnSpan":[456,456],"tnHighlights":[[456,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[457,{"contents":{"tnSpan":[454,458],"tnHighlights":[[455,"HighlightGroup"],[458,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[458,{"contents":{"tnSpan":[458,458],"tnHighlights":[[458,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[396,{"contents":{"tnuHighlights":[[396,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[399,{"contents":{"tnuHighlights":[[399,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[402,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[404,{"contents":{"tnuHighlights":[[404,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[407,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nProb    = Float\n"]},"tag":"Update"}],[409,{"contents":{"tnuHighlights":[[409,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[412,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[415,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[419,{"contents":{"tnuHighlights":[[419,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[421,{"contents":{"tnuHighlights":[[399,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[399,{"contents":{"tnuHighlights":[[421,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[422,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[426,{"contents":{"tnuHighlights":[[426,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[430,{"contents":{"tnuHighlights":[[430,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[435,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef Fin(n:Nat) -> Type = %Fin(n)\n"]},"tag":"Update"}],[437,{"contents":{"tnuHighlights":[[419,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[419,{"contents":{"tnuHighlights":[[437,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[440,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef logBinomialProb(n':Nat, p:Prob, counts':Nat) -> LogProb =\n  n      = n_to_f n'\n  counts = n_to_f counts'\n  pSuccess = log p * counts\n  pFailure = log1p (-p) * (n - counts)\n  normConst = (lbeta (1. + counts) (1. + n - counts) +\n               log1p (n))\n  pSuccess + pFailure - normConst\n"]},"tag":"Update"}],[442,{"contents":{"tnuHighlights":[[399,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[399,{"contents":{"tnuHighlights":[[442,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[444,{"contents":{"tnuHighlights":[[404,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[404,{"contents":{"tnuHighlights":[[444,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[447,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[449,{"contents":{"tnuHighlights":[[430,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[430,{"contents":{"tnuHighlights":[[449,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[451,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[454,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef categorical(logprobs: n=>Float, key: Key) -> n given (n|Ix) =\n  categorical_from_cdf(cdf_for_categorical logprobs, key)\n"]},"tag":"Update"}],[456,{"contents":{"tnuHighlights":[[426,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[426,{"contents":{"tnuHighlights":[[456,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[458,{"contents":{"tnuHighlights":[[409,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[409,{"contents":{"tnuHighlights":[[458,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[394,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n.1:Nat,p.1:Float32,k:Word64) -> Nat)"]},"tag":"Update"}],[399,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[402,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[404,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[407,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[409,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[412,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[415,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[419,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[421,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[422,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Add a)](v#1:a,v#2:a) -> a)"]},"tag":"Update"}],[423,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[424,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[426,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin v#1) => Float32)"]},"tag":"Update"}],[428,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin v#1) => Float32)"]},"tag":"Update"}],[430,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Fin v#1)"]},"tag":"Update"}],[433,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[435,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n:Nat) -> Type)"]},"tag":"Update"}],[437,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[440,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n_:Nat,p:Float32,counts_:Nat) -> Float32)"]},"tag":"Update"}],[442,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[444,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[446,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[447,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n.2:Type}[v#2:(Ix n.2)](v#3:n.2) -> Nat)"]},"tag":"Update"}],[448,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[449,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Fin v#1)"]},"tag":"Update"}],[451,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n.2:Type}[v#3:(Ix n.2)](v#4:n.2) -> Nat)"]},"tag":"Update"}],[453,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[454,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Type}[v#0:(Ix n)](logprob:(n => Float32),key:Word64) -> n)"]},"tag":"Update"}],[456,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin v#1) => Float32)"]},"tag":"Update"}],[457,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Fin v#1)"]},"tag":"Update"}],[458,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[34,{"contents":[{"rsbBlockId":34,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":65,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[35,{"contents":[{"rsbBlockId":35,"rsbHtml":"<div class=\"code-block\"><span id=\"span_35_460\">inversionSamples</span><span> </span><span class=\"symbol\" id=\"span_35_461\">=</span><span> </span><span id=\"span_35_462\">rand_vec</span><span> </span><span id=\"span_35_464\">numSamples</span><span> </span><span class=\"symbol\" id=\"span_35_467\">(</span><span class=\"symbol\" id=\"span_35_469\">\\</span><span id=\"span_35_470\">k</span><span class=\"symbol\" id=\"span_35_471\">.</span><span> </span><span id=\"span_35_472\">binomialSample</span><span> </span><span id=\"span_35_474\">n</span><span> </span><span id=\"span_35_476\">p</span><span> </span><span id=\"span_35_478\">k</span><span class=\"symbol\" id=\"span_35_479\">)</span><span> </span><span id=\"span_35_481\">k0</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[460,461,462,464,467,469,470,471,472,474,476,478,479,481],"rsbNumLines":1,"rsbLine":66,"rsbText":"inversionSamples = rand_vec numSamples (\\k. binomialSample n p k) k0\n"},"Complete",[{"contents":[[460,460],[461,459],[462,462],[464,464],[467,466],[469,468],[470,470],[471,468],[472,472],[474,474],[476,476],[478,478],[479,466],[481,481]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[460,481],"tnHighlights":[[459,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[459,{"contents":{"tnSpan":[460,481],"tnHighlights":[[461,"HighlightLeaf"],[460,"HighlightGroup"],[480,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[460,{"contents":{"tnSpan":[460,460],"tnHighlights":[[460,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[461,{"contents":{"tnSpan":[461,461],"tnHighlights":[[461,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[462,{"contents":{"tnSpan":[462,462],"tnHighlights":[[462,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[463,{"contents":{"tnSpan":[462,464],"tnHighlights":[[462,"HighlightGroup"],[464,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[464,{"contents":{"tnSpan":[464,464],"tnHighlights":[[464,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[465,{"contents":{"tnSpan":[462,479],"tnHighlights":[[463,"HighlightGroup"],[466,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[466,{"contents":{"tnSpan":[467,479],"tnHighlights":[[467,"HighlightLeaf"],[479,"HighlightLeaf"],[468,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[467,{"contents":{"tnSpan":[467,467],"tnHighlights":[[467,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[468,{"contents":{"tnSpan":[469,478],"tnHighlights":[[469,"HighlightLeaf"],[471,"HighlightLeaf"],[470,"HighlightGroup"],[477,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[469,{"contents":{"tnSpan":[469,469],"tnHighlights":[[469,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[470,{"contents":{"tnSpan":[470,470],"tnHighlights":[[470,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[471,{"contents":{"tnSpan":[471,471],"tnHighlights":[[471,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[472,{"contents":{"tnSpan":[472,472],"tnHighlights":[[472,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[473,{"contents":{"tnSpan":[472,474],"tnHighlights":[[472,"HighlightGroup"],[474,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[474,{"contents":{"tnSpan":[474,474],"tnHighlights":[[474,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[475,{"contents":{"tnSpan":[472,476],"tnHighlights":[[473,"HighlightGroup"],[476,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[476,{"contents":{"tnSpan":[476,476],"tnHighlights":[[476,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[477,{"contents":{"tnSpan":[472,478],"tnHighlights":[[475,"HighlightGroup"],[478,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[478,{"contents":{"tnSpan":[478,478],"tnHighlights":[[478,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[479,{"contents":{"tnSpan":[479,479],"tnHighlights":[[479,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[480,{"contents":{"tnSpan":[462,481],"tnHighlights":[[465,"HighlightGroup"],[481,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[481,{"contents":{"tnSpan":[481,481],"tnHighlights":[[481,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[460,{"contents":{"tnuHighlights":[[460,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[462,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef rand_vec(n:Nat, f: (Key) -> a, k: Key) -> Fin n => a  given (a:Type) =\n  for i:(Fin n). f ixkey(k, i)\n"]},"tag":"Update"}],[464,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nnumSamples = 5000\n"]},"tag":"Update"}],[470,{"contents":{"tnuHighlights":[[470,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[472,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef binomialSample(n:Nat, p:Prob, k:Key) -> Nat =\n  m = n + 1\n  logprobs = for i:(Fin m). logBinomialProb n p $ ordinal i\n  ordinal $ categorical logprobs k\n"]},"tag":"Update"}],[474,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nn = 10\n"]},"tag":"Update"}],[476,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\np = 0.4\n"]},"tag":"Update"}],[478,{"contents":{"tnuHighlights":[[470,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[470,{"contents":{"tnuHighlights":[[478,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[481,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nk0 = new_key 0\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[462,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}(n:Nat,f:((v#0:Word64) -> a),k:Word64) -> ((Fin n) => a))"]},"tag":"Update"}],[464,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[470,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[472,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n.1:Nat,p.1:Float32,k:Word64) -> Nat)"]},"tag":"Update"}],[474,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[476,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[477,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[478,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[480,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin numSamp) => Nat)"]},"tag":"Update"}],[481,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[36,{"contents":[{"rsbBlockId":36,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":67,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[37,{"contents":[{"rsbBlockId":37,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_37_482\">p</span><span> </span><span id=\"span_37_483\">slice</span><span> </span><span id=\"span_37_485\">inversionSamples</span><span> </span><span class=\"literal\" id=\"span_37_487\">0</span><span> </span><span class=\"symbol\" id=\"span_37_488\">$</span><span> </span><span id=\"span_37_490\">Fin</span><span> </span><span class=\"literal\" id=\"span_37_492\">10</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[482,483,485,487,488,490,492],"rsbNumLines":1,"rsbLine":68,"rsbText":":p slice inversionSamples 0 $ Fin 10\n"},"Complete",[{"contents":[[483,483],[485,485],[487,487],[488,489],[490,490],[492,492]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[483,492],"tnHighlights":[[489,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[483,{"contents":{"tnSpan":[483,483],"tnHighlights":[[483,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[484,{"contents":{"tnSpan":[483,485],"tnHighlights":[[483,"HighlightGroup"],[485,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[485,{"contents":{"tnSpan":[485,485],"tnHighlights":[[485,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[486,{"contents":{"tnSpan":[483,487],"tnHighlights":[[484,"HighlightGroup"],[487,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[487,{"contents":{"tnSpan":[487,487],"tnHighlights":[[487,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[488,{"contents":{"tnSpan":[488,488],"tnHighlights":[[488,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[489,{"contents":{"tnSpan":[483,492],"tnHighlights":[[488,"HighlightLeaf"],[486,"HighlightGroup"],[491,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[490,{"contents":{"tnSpan":[490,490],"tnHighlights":[[490,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[491,{"contents":{"tnSpan":[490,492],"tnHighlights":[[490,"HighlightGroup"],[492,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[492,{"contents":{"tnSpan":[492,492],"tnHighlights":[[492,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[483,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef slice(xs:n=>a, start:Nat, m|Ix) -> m=>a given (n|Ix, a:Type) =\n  for i. xs[from_ordinal (ordinal i + start)]\n"]},"tag":"Update"}],[485,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ninversionSamples = rand_vec numSamples (\\k. binomialSample n p k) k0\n"]},"tag":"Update"}],[489,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}],[490,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef Fin(n:Nat) -> Type = %Fin(n)\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[483,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Type}[v#0:(Ix n)]{a:Type}(xs:(n => a),start:Nat,m:Type)[v#1:(Ix m)] -> (m\n                                                                            => a))"]},"tag":"Update"}],[485,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin numSamp) => Nat)"]},"tag":"Update"}],[487,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[489,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}(x:a) -> (List Word8))"]},"tag":"Update"}],[490,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n:Nat) -> Type)"]},"tag":"Update"}],[491,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[492,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"},{"contents":"[6, 3, 3, 3, 4, 5, 1, 3, 3, 6]","tag":"RenderedTextOut"}]],"tag":"Create"}],[38,{"contents":[{"rsbBlockId":38,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":70,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[39,{"contents":[{"rsbBlockId":39,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_39_493\">p</span><span> </span><span id=\"span_39_494\">meanAndVariance</span><span> </span><span class=\"symbol\" id=\"span_39_495\">$</span><span> </span><span id=\"span_39_497\">map</span><span> </span><span id=\"span_39_499\">n_to_f</span><span> </span><span id=\"span_39_501\">inversionSamples</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[493,494,495,497,499,501],"rsbNumLines":1,"rsbLine":71,"rsbText":":p meanAndVariance $ map n_to_f inversionSamples\n"},"CompleteWithErrors",[{"contents":[[494,494],[495,496],[497,497],[499,499],[501,501]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[494,501],"tnHighlights":[[496,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[494,{"contents":{"tnSpan":[494,494],"tnHighlights":[[494,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[495,{"contents":{"tnSpan":[495,495],"tnHighlights":[[495,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[496,{"contents":{"tnSpan":[494,501],"tnHighlights":[[495,"HighlightLeaf"],[494,"HighlightGroup"],[500,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[497,{"contents":{"tnSpan":[497,497],"tnHighlights":[[497,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[498,{"contents":{"tnSpan":[497,499],"tnHighlights":[[497,"HighlightGroup"],[499,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[499,{"contents":{"tnSpan":[499,499],"tnHighlights":[[499,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[500,{"contents":{"tnSpan":[497,501],"tnHighlights":[[498,"HighlightGroup"],[501,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[501,{"contents":{"tnSpan":[501,501],"tnHighlights":[[501,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[494,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef meanAndVariance(xs:n=>Float) -> (Float, Float) given (n|Ix) = (mean xs, sq $ std xs)\n"]},"tag":"Update"}],[496,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[497,"Name error: variable not in scope: map"],"tag":"RenderedError"}]],"tag":"Create"}],[40,{"contents":[{"rsbBlockId":40,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":73,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[41,{"contents":[{"rsbBlockId":41,"rsbHtml":"<div class=\"prose-block\"><p>The following variant is guaranteed to evaluate the CDF only once.</p>\n</div>","rsbLexemeList":[],"rsbNumLines":2,"rsbLine":74,"rsbText":"'The following variant is guaranteed to evaluate the CDF only once.\n\n"},"Inert",[]],"tag":"Create"}],[42,{"contents":[{"rsbBlockId":42,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_42_503\">def</span><span> </span><span id=\"span_42_504\">binomialBatch</span><span class=\"symbol\" id=\"span_42_506\">(</span><span id=\"span_42_507\">n</span><span class=\"symbol\" id=\"span_42_508\">:</span><span id=\"span_42_510\">Nat</span><span class=\"symbol\" id=\"span_42_511\">,</span><span> </span><span id=\"span_42_512\">p</span><span class=\"symbol\" id=\"span_42_513\">:</span><span id=\"span_42_515\">Prob</span><span class=\"symbol\" id=\"span_42_516\">,</span><span> </span><span id=\"span_42_517\">k</span><span class=\"symbol\" id=\"span_42_518\">:</span><span id=\"span_42_520\">Key</span><span class=\"symbol\" id=\"span_42_521\">)</span><span> </span><span class=\"symbol\" id=\"span_42_522\">-&gt;</span><span> </span><span id=\"span_42_523\">a</span><span> </span><span class=\"symbol\" id=\"span_42_524\">=&gt;</span><span> </span><span id=\"span_42_526\">Nat</span><span> </span><span class=\"keyword\" id=\"span_42_527\">given</span><span> </span><span class=\"symbol\" id=\"span_42_529\">(</span><span id=\"span_42_530\">a</span><span class=\"symbol\" id=\"span_42_531\">|</span><span id=\"span_42_533\">Ix</span><span class=\"symbol\" id=\"span_42_534\">)</span><span> </span><span class=\"symbol\" id=\"span_42_535\">=</span><span class=\"comment\">\n  </span><span id=\"span_42_538\">m</span><span> </span><span class=\"symbol\" id=\"span_42_539\">=</span><span> </span><span id=\"span_42_540\">n</span><span> </span><span class=\"symbol\" id=\"span_42_541\">+</span><span> </span><span class=\"literal\" id=\"span_42_543\">1</span><span class=\"comment\">\n  </span><span id=\"span_42_545\">logprobs</span><span> </span><span class=\"symbol\" id=\"span_42_546\">=</span><span> </span><span class=\"keyword\" id=\"span_42_548\">for</span><span> </span><span id=\"span_42_549\">i</span><span class=\"symbol\" id=\"span_42_550\">:</span><span class=\"symbol\" id=\"span_42_553\">(</span><span id=\"span_42_554\">Fin</span><span> </span><span id=\"span_42_556\">m</span><span class=\"symbol\" id=\"span_42_557\">)</span><span class=\"symbol\" id=\"span_42_558\">.</span><span> </span><span id=\"span_42_559\">logBinomialProb</span><span> </span><span id=\"span_42_561\">n</span><span> </span><span id=\"span_42_563\">p</span><span> </span><span class=\"symbol\" id=\"span_42_564\">$</span><span> </span><span id=\"span_42_566\">ordinal</span><span> </span><span id=\"span_42_568\">i</span><span class=\"comment\">\n  </span><span id=\"span_42_570\">map</span><span> </span><span id=\"span_42_572\">ordinal</span><span> </span><span class=\"symbol\" id=\"span_42_573\">$</span><span> </span><span id=\"span_42_575\">categorical_batch</span><span> </span><span id=\"span_42_577\">logprobs</span><span> </span><span id=\"span_42_579\">k</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[503,504,506,507,508,510,511,512,513,515,516,517,518,520,521,522,523,524,526,527,529,530,531,533,534,535,538,539,540,541,543,545,546,548,549,550,553,554,556,557,558,559,561,563,564,566,568,570,572,573,575,577,579],"rsbNumLines":4,"rsbLine":76,"rsbText":"def binomialBatch(n:Nat, p:Prob, k:Key) -> a => Nat given (a|Ix) =\n  m = n + 1\n  logprobs = for i:(Fin m). logBinomialProb n p $ ordinal i\n  map ordinal $ categorical_batch logprobs k\n"},"CompleteWithErrors",[{"contents":[[503,502],[504,504],[506,505],[507,507],[508,509],[510,510],[511,505],[512,512],[513,514],[515,515],[516,505],[517,517],[518,519],[520,520],[521,505],[522,502],[523,523],[524,525],[526,526],[527,502],[529,528],[530,530],[531,532],[533,533],[534,528],[535,502],[538,538],[539,537],[540,540],[541,541],[543,543],[545,545],[546,544],[548,547],[549,549],[550,551],[553,552],[554,554],[556,556],[557,552],[558,547],[559,559],[561,561],[563,563],[564,565],[566,566],[568,568],[570,570],[572,572],[573,574],[575,575],[577,577],[579,579]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[503,579],"tnHighlights":[[502,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[502,{"contents":{"tnSpan":[503,579],"tnHighlights":[[503,"HighlightLeaf"],[522,"HighlightLeaf"],[527,"HighlightLeaf"],[535,"HighlightLeaf"],[504,"HighlightGroup"],[505,"HighlightGroup"],[525,"HighlightGroup"],[528,"HighlightGroup"],[536,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[503,{"contents":{"tnSpan":[503,503],"tnHighlights":[[503,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[504,{"contents":{"tnSpan":[504,504],"tnHighlights":[[504,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[505,{"contents":{"tnSpan":[506,521],"tnHighlights":[[506,"HighlightLeaf"],[511,"HighlightLeaf"],[516,"HighlightLeaf"],[521,"HighlightLeaf"],[509,"HighlightGroup"],[514,"HighlightGroup"],[519,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[506,{"contents":{"tnSpan":[506,506],"tnHighlights":[[506,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[507,{"contents":{"tnSpan":[507,507],"tnHighlights":[[507,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[508,{"contents":{"tnSpan":[508,508],"tnHighlights":[[508,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[509,{"contents":{"tnSpan":[507,510],"tnHighlights":[[508,"HighlightLeaf"],[507,"HighlightGroup"],[510,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[510,{"contents":{"tnSpan":[510,510],"tnHighlights":[[510,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[511,{"contents":{"tnSpan":[511,511],"tnHighlights":[[511,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[512,{"contents":{"tnSpan":[512,512],"tnHighlights":[[512,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[513,{"contents":{"tnSpan":[513,513],"tnHighlights":[[513,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[514,{"contents":{"tnSpan":[512,515],"tnHighlights":[[513,"HighlightLeaf"],[512,"HighlightGroup"],[515,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[515,{"contents":{"tnSpan":[515,515],"tnHighlights":[[515,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[516,{"contents":{"tnSpan":[516,516],"tnHighlights":[[516,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[517,{"contents":{"tnSpan":[517,517],"tnHighlights":[[517,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[518,{"contents":{"tnSpan":[518,518],"tnHighlights":[[518,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[519,{"contents":{"tnSpan":[517,520],"tnHighlights":[[518,"HighlightLeaf"],[517,"HighlightGroup"],[520,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[520,{"contents":{"tnSpan":[520,520],"tnHighlights":[[520,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[521,{"contents":{"tnSpan":[521,521],"tnHighlights":[[521,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[522,{"contents":{"tnSpan":[522,522],"tnHighlights":[[522,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[523,{"contents":{"tnSpan":[523,523],"tnHighlights":[[523,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[524,{"contents":{"tnSpan":[524,524],"tnHighlights":[[524,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[525,{"contents":{"tnSpan":[523,526],"tnHighlights":[[524,"HighlightLeaf"],[523,"HighlightGroup"],[526,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[526,{"contents":{"tnSpan":[526,526],"tnHighlights":[[526,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[527,{"contents":{"tnSpan":[527,527],"tnHighlights":[[527,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[528,{"contents":{"tnSpan":[529,534],"tnHighlights":[[529,"HighlightLeaf"],[534,"HighlightLeaf"],[532,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[529,{"contents":{"tnSpan":[529,529],"tnHighlights":[[529,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[530,{"contents":{"tnSpan":[530,530],"tnHighlights":[[530,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[531,{"contents":{"tnSpan":[531,531],"tnHighlights":[[531,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[532,{"contents":{"tnSpan":[530,533],"tnHighlights":[[531,"HighlightLeaf"],[530,"HighlightGroup"],[533,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[533,{"contents":{"tnSpan":[533,533],"tnHighlights":[[533,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[534,{"contents":{"tnSpan":[534,534],"tnHighlights":[[534,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[535,{"contents":{"tnSpan":[535,535],"tnHighlights":[[535,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[536,{"contents":{"tnSpan":[538,579],"tnHighlights":[[537,"HighlightGroup"],[544,"HighlightGroup"],[569,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[537,{"contents":{"tnSpan":[538,543],"tnHighlights":[[539,"HighlightLeaf"],[538,"HighlightGroup"],[542,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[538,{"contents":{"tnSpan":[538,538],"tnHighlights":[[538,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[539,{"contents":{"tnSpan":[539,539],"tnHighlights":[[539,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[540,{"contents":{"tnSpan":[540,540],"tnHighlights":[[540,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[541,{"contents":{"tnSpan":[541,541],"tnHighlights":[[541,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[542,{"contents":{"tnSpan":[540,543],"tnHighlights":[[540,"HighlightGroup"],[541,"HighlightGroup"],[543,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[543,{"contents":{"tnSpan":[543,543],"tnHighlights":[[543,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[544,{"contents":{"tnSpan":[545,568],"tnHighlights":[[546,"HighlightLeaf"],[545,"HighlightGroup"],[547,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[545,{"contents":{"tnSpan":[545,545],"tnHighlights":[[545,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[546,{"contents":{"tnSpan":[546,546],"tnHighlights":[[546,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[547,{"contents":{"tnSpan":[548,568],"tnHighlights":[[548,"HighlightLeaf"],[558,"HighlightLeaf"],[551,"HighlightGroup"],[565,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[548,{"contents":{"tnSpan":[548,548],"tnHighlights":[[548,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[549,{"contents":{"tnSpan":[549,549],"tnHighlights":[[549,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[550,{"contents":{"tnSpan":[550,550],"tnHighlights":[[550,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[551,{"contents":{"tnSpan":[549,557],"tnHighlights":[[550,"HighlightLeaf"],[549,"HighlightGroup"],[552,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[552,{"contents":{"tnSpan":[553,557],"tnHighlights":[[553,"HighlightLeaf"],[557,"HighlightLeaf"],[555,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[553,{"contents":{"tnSpan":[553,553],"tnHighlights":[[553,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[554,{"contents":{"tnSpan":[554,554],"tnHighlights":[[554,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[555,{"contents":{"tnSpan":[554,556],"tnHighlights":[[554,"HighlightGroup"],[556,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[556,{"contents":{"tnSpan":[556,556],"tnHighlights":[[556,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[557,{"contents":{"tnSpan":[557,557],"tnHighlights":[[557,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[558,{"contents":{"tnSpan":[558,558],"tnHighlights":[[558,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[559,{"contents":{"tnSpan":[559,559],"tnHighlights":[[559,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[560,{"contents":{"tnSpan":[559,561],"tnHighlights":[[559,"HighlightGroup"],[561,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[561,{"contents":{"tnSpan":[561,561],"tnHighlights":[[561,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[562,{"contents":{"tnSpan":[559,563],"tnHighlights":[[560,"HighlightGroup"],[563,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[563,{"contents":{"tnSpan":[563,563],"tnHighlights":[[563,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[564,{"contents":{"tnSpan":[564,564],"tnHighlights":[[564,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[565,{"contents":{"tnSpan":[559,568],"tnHighlights":[[564,"HighlightLeaf"],[562,"HighlightGroup"],[567,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[566,{"contents":{"tnSpan":[566,566],"tnHighlights":[[566,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[567,{"contents":{"tnSpan":[566,568],"tnHighlights":[[566,"HighlightGroup"],[568,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[568,{"contents":{"tnSpan":[568,568],"tnHighlights":[[568,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[569,{"contents":{"tnSpan":[570,579],"tnHighlights":[[574,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[570,{"contents":{"tnSpan":[570,570],"tnHighlights":[[570,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[571,{"contents":{"tnSpan":[570,572],"tnHighlights":[[570,"HighlightGroup"],[572,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[572,{"contents":{"tnSpan":[572,572],"tnHighlights":[[572,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[573,{"contents":{"tnSpan":[573,573],"tnHighlights":[[573,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[574,{"contents":{"tnSpan":[570,579],"tnHighlights":[[573,"HighlightLeaf"],[571,"HighlightGroup"],[578,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[575,{"contents":{"tnSpan":[575,575],"tnHighlights":[[575,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[576,{"contents":{"tnSpan":[575,577],"tnHighlights":[[575,"HighlightGroup"],[577,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[577,{"contents":{"tnSpan":[577,577],"tnHighlights":[[577,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[578,{"contents":{"tnSpan":[575,579],"tnHighlights":[[576,"HighlightGroup"],[579,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[579,{"contents":{"tnSpan":[579,579],"tnHighlights":[[579,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[507,{"contents":{"tnuHighlights":[[507,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[510,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[512,{"contents":{"tnuHighlights":[[512,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[515,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nProb    = Float\n"]},"tag":"Update"}],[517,{"contents":{"tnuHighlights":[[517,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[520,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[523,{"contents":{"tnuHighlights":[[530,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[530,{"contents":{"tnuHighlights":[[523,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[526,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[530,{"contents":{"tnuHighlights":[[530,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[530,{"contents":{"tnuHighlights":[[530,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[533,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[538,{"contents":{"tnuHighlights":[[538,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[540,{"contents":{"tnuHighlights":[[507,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[507,{"contents":{"tnuHighlights":[[540,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[541,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[545,{"contents":{"tnuHighlights":[[545,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[549,{"contents":{"tnuHighlights":[[549,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[554,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef Fin(n:Nat) -> Type = %Fin(n)\n"]},"tag":"Update"}],[556,{"contents":{"tnuHighlights":[[538,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[538,{"contents":{"tnuHighlights":[[556,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[559,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef logBinomialProb(n':Nat, p:Prob, counts':Nat) -> LogProb =\n  n      = n_to_f n'\n  counts = n_to_f counts'\n  pSuccess = log p * counts\n  pFailure = log1p (-p) * (n - counts)\n  normConst = (lbeta (1. + counts) (1. + n - counts) +\n               log1p (n))\n  pSuccess + pFailure - normConst\n"]},"tag":"Update"}],[561,{"contents":{"tnuHighlights":[[507,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[507,{"contents":{"tnuHighlights":[[561,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[563,{"contents":{"tnuHighlights":[[512,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[512,{"contents":{"tnuHighlights":[[563,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[566,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[568,{"contents":{"tnuHighlights":[[549,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[549,{"contents":{"tnuHighlights":[[568,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[570,"Name error: variable not in scope: map"],"tag":"RenderedError"}]],"tag":"Create"}],[43,{"contents":[{"rsbBlockId":43,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":80,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[44,{"contents":[{"rsbBlockId":44,"rsbHtml":"<div class=\"code-block\"><span id=\"span_44_581\">inversionBatchSamples</span><span> </span><span class=\"symbol\" id=\"span_44_582\">=</span><span> </span><span class=\"symbol\" id=\"span_44_584\">(</span><span id=\"span_44_585\">binomialBatch</span><span> </span><span id=\"span_44_587\">n</span><span> </span><span id=\"span_44_589\">p</span><span> </span><span id=\"span_44_591\">k0</span><span class=\"symbol\" id=\"span_44_592\">)</span><span> </span><span class=\"symbol\" id=\"span_44_593\">::</span><span> </span><span id=\"span_44_595\">Fin</span><span> </span><span id=\"span_44_597\">numSamples</span><span> </span><span class=\"symbol\" id=\"span_44_598\">=&gt;</span><span> </span><span id=\"span_44_600\">Nat</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[581,582,584,585,587,589,591,592,593,595,597,598,600],"rsbNumLines":1,"rsbLine":81,"rsbText":"inversionBatchSamples = (binomialBatch n p k0) :: Fin numSamples => Nat\n"},"CompleteWithErrors",[{"contents":[[581,581],[582,580],[584,583],[585,585],[587,587],[589,589],[591,591],[592,583],[593,594],[595,595],[597,597],[598,599],[600,600]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[581,600],"tnHighlights":[[580,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[580,{"contents":{"tnSpan":[581,600],"tnHighlights":[[582,"HighlightLeaf"],[581,"HighlightGroup"],[594,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[581,{"contents":{"tnSpan":[581,581],"tnHighlights":[[581,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[582,{"contents":{"tnSpan":[582,582],"tnHighlights":[[582,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[583,{"contents":{"tnSpan":[584,592],"tnHighlights":[[584,"HighlightLeaf"],[592,"HighlightLeaf"],[590,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[584,{"contents":{"tnSpan":[584,584],"tnHighlights":[[584,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[585,{"contents":{"tnSpan":[585,585],"tnHighlights":[[585,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[586,{"contents":{"tnSpan":[585,587],"tnHighlights":[[585,"HighlightGroup"],[587,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[587,{"contents":{"tnSpan":[587,587],"tnHighlights":[[587,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[588,{"contents":{"tnSpan":[585,589],"tnHighlights":[[586,"HighlightGroup"],[589,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[589,{"contents":{"tnSpan":[589,589],"tnHighlights":[[589,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[590,{"contents":{"tnSpan":[585,591],"tnHighlights":[[588,"HighlightGroup"],[591,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[591,{"contents":{"tnSpan":[591,591],"tnHighlights":[[591,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[592,{"contents":{"tnSpan":[592,592],"tnHighlights":[[592,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[593,{"contents":{"tnSpan":[593,593],"tnHighlights":[[593,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[594,{"contents":{"tnSpan":[584,600],"tnHighlights":[[593,"HighlightLeaf"],[583,"HighlightGroup"],[599,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[595,{"contents":{"tnSpan":[595,595],"tnHighlights":[[595,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[596,{"contents":{"tnSpan":[595,597],"tnHighlights":[[595,"HighlightGroup"],[597,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[597,{"contents":{"tnSpan":[597,597],"tnHighlights":[[597,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[598,{"contents":{"tnSpan":[598,598],"tnHighlights":[[598,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[599,{"contents":{"tnSpan":[595,600],"tnHighlights":[[598,"HighlightLeaf"],[596,"HighlightGroup"],[600,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[600,{"contents":{"tnSpan":[600,600],"tnHighlights":[[600,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[],"tag":"RenderedTreeNodeUpdate"},{"contents":[585,"Name error: error in (earlier) definition of variable: binomialBatch"],"tag":"RenderedError"}]],"tag":"Create"}],[45,{"contents":[{"rsbBlockId":45,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":82,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[46,{"contents":[{"rsbBlockId":46,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_46_601\">p</span><span> </span><span id=\"span_46_602\">slice</span><span> </span><span id=\"span_46_604\">inversionBatchSamples</span><span> </span><span class=\"literal\" id=\"span_46_606\">0</span><span> </span><span class=\"symbol\" id=\"span_46_607\">$</span><span> </span><span id=\"span_46_609\">Fin</span><span> </span><span class=\"literal\" id=\"span_46_611\">10</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[601,602,604,606,607,609,611],"rsbNumLines":1,"rsbLine":83,"rsbText":":p slice inversionBatchSamples 0 $ Fin 10\n"},"CompleteWithErrors",[{"contents":[[602,602],[604,604],[606,606],[607,608],[609,609],[611,611]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[602,611],"tnHighlights":[[608,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[602,{"contents":{"tnSpan":[602,602],"tnHighlights":[[602,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[603,{"contents":{"tnSpan":[602,604],"tnHighlights":[[602,"HighlightGroup"],[604,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[604,{"contents":{"tnSpan":[604,604],"tnHighlights":[[604,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[605,{"contents":{"tnSpan":[602,606],"tnHighlights":[[603,"HighlightGroup"],[606,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[606,{"contents":{"tnSpan":[606,606],"tnHighlights":[[606,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[607,{"contents":{"tnSpan":[607,607],"tnHighlights":[[607,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[608,{"contents":{"tnSpan":[602,611],"tnHighlights":[[607,"HighlightLeaf"],[605,"HighlightGroup"],[610,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[609,{"contents":{"tnSpan":[609,609],"tnHighlights":[[609,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[610,{"contents":{"tnSpan":[609,611],"tnHighlights":[[609,"HighlightGroup"],[611,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[611,{"contents":{"tnSpan":[611,611],"tnHighlights":[[611,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[602,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef slice(xs:n=>a, start:Nat, m|Ix) -> m=>a given (n|Ix, a:Type) =\n  for i. xs[from_ordinal (ordinal i + start)]\n"]},"tag":"Update"}],[608,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[604,"Name error: error in (earlier) definition of variable: inversionBatchSamples"],"tag":"RenderedError"}]],"tag":"Create"}],[47,{"contents":[{"rsbBlockId":47,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbNumLines":1,"rsbLine":85,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[48,{"contents":[{"rsbBlockId":48,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_48_612\">p</span><span> </span><span id=\"span_48_613\">meanAndVariance</span><span> </span><span class=\"symbol\" id=\"span_48_614\">$</span><span> </span><span id=\"span_48_616\">map</span><span> </span><span id=\"span_48_618\">n_to_f</span><span> </span><span id=\"span_48_620\">inversionBatchSamples</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[612,613,614,616,618,620],"rsbNumLines":1,"rsbLine":86,"rsbText":":p meanAndVariance $ map n_to_f inversionBatchSamples\n"},"CompleteWithErrors",[{"contents":[[613,613],[614,615],[616,616],[618,618],[620,620]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnSpan":[613,620],"tnHighlights":[[615,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[613,{"contents":{"tnSpan":[613,613],"tnHighlights":[[613,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[614,{"contents":{"tnSpan":[614,614],"tnHighlights":[[614,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[615,{"contents":{"tnSpan":[613,620],"tnHighlights":[[614,"HighlightLeaf"],[613,"HighlightGroup"],[619,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[616,{"contents":{"tnSpan":[616,616],"tnHighlights":[[616,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[617,{"contents":{"tnSpan":[616,618],"tnHighlights":[[616,"HighlightGroup"],[618,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[618,{"contents":{"tnSpan":[618,618],"tnHighlights":[[618,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[619,{"contents":{"tnSpan":[616,620],"tnHighlights":[[617,"HighlightGroup"],[620,"HighlightGroup"]],"tnText":""},"tag":"Create"}],[620,{"contents":{"tnSpan":[620,620],"tnHighlights":[[620,"HighlightGroup"]],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[613,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef meanAndVariance(xs:n=>Float) -> (Float, Float) given (n|Ix) = (mean xs, sq $ std xs)\n"]},"tag":"Update"}],[615,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[616,"Name error: variable not in scope: map"],"tag":"RenderedError"}]],"tag":"Create"}]]}