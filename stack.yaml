# Copyright 2020 Google LLC
#
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file or at
# https://developers.google.com/open-source/licenses/bsd

# Keep in sync with llvm-hs@llvm-15: https://github.com/llvm-hs/llvm-hs/blob/llvm-15/stack.yaml
resolver: lts-20.16 # GHC 9.2.7

packages:
- .

extra-deps:
  - github: llvm-hs/llvm-hs
    commit: 80e0de0f96eb78288c88fda0eaba0f7cf5d38a30 # llvm-15, 2023-04-03
    subdirs:
      - llvm-hs
      - llvm-hs-pure
  - megaparsec-9.2.2
  - prettyprinter-1.6.2

nix:
  enable: false
  packages: [ libpng llvm_15 pkg-config zlib ]

ghc-options:
  containers: -fno-prof-auto -O2
  hashable: -fno-prof-auto -O2
  llvm-hs-pure: -fno-prof-auto -O2
  llvm-hs: -fno-prof-auto -O2
  megaparsec: -fno-prof-auto -O2
  parser-combinators: -fno-prof-auto -O2
  prettyprinter: -fno-prof-auto -O2
  store-core: -fno-prof-auto -O2
  store: -fno-prof-auto -O2
  unordered-containers: -fno-prof-auto -O2
